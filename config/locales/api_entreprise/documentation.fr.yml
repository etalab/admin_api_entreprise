---
fr:
  api_entreprise:
    documentation_pages:
      guide_migration:
        title: Guide de migration&nbsp;📋
        sections:
          - anchor: 'introduction'
            title: Introduction
            content: |+
              **Ce guide liste les changements effectués entre la version 2 de l’API&nbsp;Entreprise et la version 3, et vous livre les éléments nécessaires pour effectuer la migration**.

              Les évolutions présentées ici ont été guidées par trois objectifs&nbsp;:&nbsp;
              - assurer une meilleure sécurité de la donnée des fournisseurs ;
              - normaliser les formats pour faciliter la compréhension et l’industrialisation ;
              - clarifier, documenter les réponses et les rendre actionnables par vos logiciels.

              {:.fr-highlight.fr}
              > **Votre jeton d'accès reste identique 🔑**
              > Pour accéder à la version 3 de l'API&nbsp;Entreprise, utilisez le même token qu'en V.2. En effet, tant que votre jeton est valide, il est inutile de refaire une demande d'accès car la migration vers la V.3 ne change pas les droits que vous avez déjà obtenu.
          - anchor: 'evolutions-generales'
            title: Évolutions générales
            subsections:
              - title: 1. Jeton d'accès à paramétrer dans le header
                anchor: 'jeton-daccès-à-paramétrer-dans-le-header-'
                content: |+
                  **🚀 Avec la V.3 :** Le jeton est à paramétrer uniquement dans le header de l’appel.

                  {:.fr-highlight.fr-highlight--example}
                  > **Avant** : Le jeton JWT pouvait être un paramètre de l’URL d’appel (query parameter).

                  **🤔 Pourquoi ?**
                  - Respecter les standards de sécurité ;
                  - Garantir que le token ne sera pas utilisé dans un navigateur.

                  **🧰 Comment ?**
                  Utilisez un client REST API pour tester les API pendant le développement.
                  Des clients sont disponibles gratuitement. API&nbsp;Entreprise utilise pour ses propres tests le client Insomnia. Le plus connu sur le marché est Postman.
                  Une fois le client installé, vous pouvez directement intégrer notre fichier [Swagger/OpenAPI](<%= developers_openapi_path %>){:target="_blank"} dedans.

              - title: 2. Votre numéro de SIRET obligatoire dans le "recipient"
                anchor: 'votre-numéro-de-siret-obligatoire-dans-le-recipient'
                content: |+
                  **🚀 Avec la V.3 :** Le paramètre obligatoire `recipient` de l’URL d’appel devra obligatoirement être complété par votre numéro de SIRET.

                  {:.fr-highlight.fr-highlight--example}
                  > **Avant** : Ce paramètre obligatoire n’était pas contraint en termes de syntaxe.

                  **🤔 Pourquoi ?**
                  - Pour garantir la traçabilité de l’appel jusqu’au bénéficiaire ayant obtenu l’habilitation à appeler l’API&nbsp;Entreprise et respecter nos engagements auprès des fournisseurs de données ;
                  - Nous avions trop d’utilisateurs inscrivant le numéro de SIRET ou RNA de l’entreprise/association recherchée.

                  {:.fr-highlight.fr-highlight--caution}
                  > **⚠️ Cas particulier**, _vous êtes un éditeur ?_
                  > Ce n’est pas votre numéro de SIRET mais celui de votre client public qu’il s’agira de renseigner. API&nbsp;Entreprise doit pouvoir tracer pour quelle entité publique l'appel a été passé.

                  Pour en savoir plus sur les paramètres obligatoires d'appel, consultez les [spécifications techniques](<%= developers_path(anchor: 'renseigner-les-paramètres-dappel-et-de-traçabilité') %>).

              - title: 3. Codes erreurs spécifiques à chaque situation, actionnables et documentés
                anchor: 'codes-erreurs-spécifiques-à-chaque-situation-actionnables-et-documentés'
                content: |+
                  **🚀 Avec la V.3 :** Tous les codes erreur HTTPS sont accompagnés de codes plus précis, spécifiques à chaque situation d’erreur. Une explication en toutes lettres est également donnée dans la payload. Enfin, dans certains cas, une métadonnée actionnable est disponible.

                  Dans l’exemple ci-dessous, la clé `retry_in` permet de relancer un appel après le nombre de secondes indiquées.

                  ###### Exemple de _payload_ d’un code HTTP 502 :
                  ```
                  {
                    "errors": [
                      {
                        "code": "04501",
                        "title": "Analyse de la situation du compte en cours",
                        "detail": "La situation de l'entreprise requiert une
                                   analyse manuelle d'un agent de l'URSSAF.
                                   Une demande d'analyse vient d'être envoyée,
                                   cela prend au maximum 2 jours.",
                        "meta": {
                          "provider": "ACOSS",
                          "retry_in": 172800
                        }
                      }
                    ]
                  }
                  ```

                  {:.fr-highlight.fr-highlight--example}
                  > Avant : Seul le code HTTP standard vous était fourni. Il pouvait correspondre à de nombreuses situations.
                  > ###### Exemple de payload d’un code HTTP 502 :
                  > ```
                  > {
                  >   "errors": [
                  >     "L'ACOSS ne peut répondre à votre requête, réessayez ultérieurement  (erreur: Analyse de la situation du compte en cours)"
                  >   ]
                  > }
                  > ```

                  **🤔 Pourquoi ?**
                  - Pour préciser la nature de l’erreur et vous aider à la comprendre ;
                  - Pour vous permettre d’actionner automatiquement l’erreur en utilisant le code.


                  **🧰 Comment ?**
                  Utiliser les libellés pour comprendre l’erreur rencontrée, voire automatiser votre logiciel en fonction du code.
                  La liste de tous les codes erreurs spécifiques (environ 80) est disponible dans le [Swagger](<%= developers_openapi_path %>){:target="_blank"}. La gestion des erreurs et l'explication des codes retours est détaillée dans la [documentation technique générale](<%= developers_path(anchor: 'code-https-et-gestion-des-erreurs') %>){:target="_blank"}.

              - title: 4. Volumétrie indiquée dans le header et actionnable
                anchor: 'volumétrie-indiquée-dans-le-header-et-actionnable'
                content: |+
                  La gestion de la volumétrie est maintenue identique à la dernière évolution de la V.2 et expliquée dans cette [documentation](<%= developers_path(anchor: 'volumétrie') %>)

              - title: 5. Gestion des évolutions futures
                anchor: 'gestion-des-évolutions-futures'
                content: |+
                  **🚀 Avec la V.3 :** Toutes les API pourront évoluer indépendamment les unes des autres. Les anciennes versions resteront disponibles si le fournisseur de la donnée continue de nous transmettre les informations. Le numéro de version devient donc un paramètre de l’appel et non plus une valeur fixe pour toutes les API.
                  📩 Une infolettre annoncera systématiquement les nouvelles évolutions.

                  {:.fr-highlight.fr-highlight--example}
                  > **Avant** : L’évolution d’un endpoint exigeait la montée en version de toute l’API.

                  **🤔 Pourquoi ?**
                  - Permettre l’ajout de nouvelles informations sans forcer les fournisseurs de service à monter de version ;
                  - Continuer de garantir la continuité des API dans le temps.

                  **🧰 Comment ?**
                  Renseigner directement le numéro de la version voulue dans l’URL, au même endroit qu’avant, par exemple :
                  ```
                  https://entreprise.api.gouv.fr/v3/insee/sirene/etablissements/:siret
                  ```

              - title: 6. Un seul fournisseur et un seul type de données par API
                anchor: 'un-seul-fournisseur-et-un-seul-type-de-données-par-api'
                content: |+
                  **🚀 Avec la V.3 :** Chaque API appelle un seul et unique fournisseur de données.

                  Il n’existe plus d’API à contenu multiple, comme celle de l’INSEE/Infogreffe, les informations des différents fournisseurs ont été séparées.

                  {:.fr-highlight.fr-highlight--example}
                  > **Avant** : Certaines API appelaient deux fournisseurs à la fois. Certaines API regroupaient de très nombreuses informations différentes.

                  **🤔 Pourquoi ?**
                  - Faciliter la compréhension métier des données transmises ;
                  - Réduire le nombre d’erreurs car le périmètre de la donnée disponible est plus explicite ;
                  - Accélérer le temps de réponse des API, car il y a moins d’appels externes ;

                  **🧰 Comment ?**
                  Utiliser la table de correspondance pour identifier les API en version 3, qui correspondent à celle en version 2 :

                  [Table de correspondance<br>des API v.2 > v.3](<%= guide_migration_path(anchor: 'table-de-correspondance-v-2-v-3') %>){:.fr-btn fr-btn--secondary}

              - title: 7. Les payloads normalisées et enrichies
                anchor: 'les-payloads-normalisées-et-enrichies'
                content: |+
                  **🚀 Avec la V.3 :** La payload de réponse est normalisée est composée systématiquement de 3 clés :
                  - `data`, qui regroupe l'ensemble des données de la ou les ressources (si c'est une ressource seule, la données est un **objet** `json`, si c'est une collection, la données est un **tableau** `json`) ;
                  - `links`, qui donne des liens vers d'autres endpoints relatifs à cette ressource, liens qui peuvent être utilisés par vos logiciels pour relancer un appel ;
                  - `meta`, qui regroupe des metadonnées liées à API&nbsp;Entreprise ou au fournisseur de données.


                  ###### Architecture de la payload V.3 :
                  ```
                  {
                    "data" : { … },
                    "links" :  { … },
                    "meta" : { … }
                  }
                  ```

                  {:.fr-highlight.fr-highlight--example}
                  > **Avant** : La structure de la payload n’était pas normalisée ni conventionnée ; elle ne contenait aucune information  explicitant la nature de la réponse. Les liens permettant d’appeler une autre API n’étaient pas disponibles.
                  > ###### Architecture de la payload V.2 :
                  > ```
                  > {
                  >   LES DONNÉES,
                  > }
                  > ```


                  **🤔 Pourquoi ?**
                  - Uniformiser toutes les payloads de réponses ;
                  - Permettre la connexion entre les API grâce à l’ajout des liens URL.


          - anchor: 'table-de-correspondance-v-2-v-3'
            title: Table de correspondance V.2 > V.3
            content: |+
              Cette partie du guide de migration permet de trouver la correspondance de chaque API de la V.2 avec les API de la V3&nbsp;:&nbsp;

              **Sommaire des tables de correspondance des API V.2&nbsp;:**
                * ["V.2 - Données de référence d'une entité" - INSEE](#v2/entreprises)
                * ["V.2 - Données de référence d'un établissement" - INSEE](#v2/etablissements)
                * ["V.2 - Extrait RCS" - Infogreffe](#v2/extrait_rcs)
                * ["V.2 - Informations déclaratives d’une association" - Ministère de l'Intérieur](#v2/associations)
                * ["V.2 - Divers documents d'une association" - Ministère de l'Intérieur](#v2/doc-associations)
                * ["V.2 - Actes" - INPI](#v2/actes)
                * ["V.2 - Conventions collectives" - Fabrique numérique des Ministères sociaux](#v2/conventions-collectives)
                * ["V.2 - Données de référence d'une entreprise artisanale" - CMA France](#v2/entreprises-artisanales)
                * ["V.2 - Effectifs d'une entreprise" - URSSAF](#v2/effectifs)
                * ["V.2 - Immatriculation EORI" - Douanes](#v2/eori)
                * ["V.2 - Chiffre d'affaires" - DGFIP](#v2/exercices)
                * ["V.2 - Bilans annuels"- INPI](#v2/bilans-inpi)
                * ["V.2 - 3 derniers bilans annuels" - Banque de France](#v2/bilans-bdf)
                * ["V.2 - Déclarations de résultats" - DGFIP](#v2/liasses-fiscales)
                * ["V.2 - Attestation fiscale" - DGFIP](#v2/attestation-fiscale)
                * ["V.2 - Attestation de vigilance" - ACOSS](#v2/attestation-vigilance)
                * ["V.2 - Conformité emploi des travailleurs handicapés" - Agefiph](#v2/conformite-emploi-handicapes)
                * ["V.2 - Cotisations de sécurité agricole" - MSA](#v2/cotis-secu-agricole)
                * ["V.2 - Cotisations retraite bâtiment" - PROBTP](#v2/cotis-retraite-batiment)
                * ["V.2 - Carte professionelle travaux publics" - FNTP](#v2/carte-pro-travaux-publics)
                * ["V.2 - Cotisations congés payés & chômage intempéries" - CNETP](#v2/cotis-conges-payes-chomage-intemperies)
                * ["V.2 - Certification en BIO" - Agence BIO](#v2/certif-bio)
                * ["V.2 - Certification RGE" - ADEME](#v2/rge-ademe)
                * ["V.2 - Certification de qualification du bâtiment" - Qualibat](#v2/qualibat)
                * ["V.2 - Certification de qualification d'ingénierie" - OPQIBI](#v2/certif-opqibi)
                * ["V.2 - Brevets, modèle et marques déposés" - INPI](#v2/brevet-modeles-marques)
            subsections:
              - title: V.2 - Données de référence d'une entité - INSEE <a name="v2/entreprises"></a>
                anchor: 'v2---données-de-référence-dune-entité---insee-'
                content: |+
                  L'API V.2 `/entreprise` de l'INSEE a été découpée en plusieurs API différentes dans la V.3 :
                  - les données de référence de l'unité légale tirées de l'Insee ;
                  - les données sur le siège social de l'unité légale sont séparées ;
                  - les mandataires socaux tirés d'Infogreffe font aussi l'objet d'une autre API.

                  La distinction entre les "diffusibles" et les "non-diffusibles" n'est plus faite par une option d'appel. Nous avons créé des API distinctes :

                  {:.fr-table}
                  | API V.2  | API V.3+ correspondantes |
                  | :--- | :--- |
                  | **API [Données de référence d'une entité - INSEE](https://v2.entreprise.api.gouv.fr/catalogue/#a-entreprises){:target="_blank"}<br> Sans** l'option d'appel des "non-diffusibles" |  |
                  | Données concernant les unités légales "diffusibles".  | API **Données unité légale diffusible** <br> `../insee/sirene/unites_legales/diffusibles/{siren}`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'insee/unites_legales_diffusibles') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1insee~1sirene~1unites_legales~1diffusibles~1{siren}/get') %>){:target="_blank"}<br> <br>Ces informations sont aussi disponibles depuis :<br> API **Données établissement diffusible** <br> `../insee/sirene/etablissements/diffusibles/{siret}`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'insee/etablissements_diffusibles') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1insee~1sirene~1etablissements~1diffusibles~1{siret}/get') %>){:target="_blank"}<br> <br> 🎁 *Nouvelle donnée disponible :* Sexe des personnes physiques.<br> <br> ⚠️ *Suppression du champ  `raison_sociale` pour les personnes physiques en V.3* : par abus de langage, on parle de raison sociale ou dénomination pour les personnes physiques, or leur nom d'entreprise correspond toujours au nom de famille et au prénom, précédés ou suivis de la mention "entrepreneur individuel" ou "EI". En savoir plus sur [service-public.fr](https://entreprendre.service-public.fr/vosdroits/F23283/personnalisation/resultat){:target="_blank"}|
                  | Données concernant les mandataires sociaux de l'entreprise.   | API **Mandataires sociaux** <br> `../infogreffe/mandataires_sociaux/{siren}`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'infogreffe/mandataires_sociaux') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1infogreffe~1rcs~1unites_legales~1{siren}~1mandataires_sociaux/get') %>){:target="_blank"}<br> <br>🎁 *Nouvelle donnée disponible :* Lieu de naissance des mandataires sociaux.|
                  | Données concernant le siège social d'une unité légale "diffusible".  | API **Données siège social diffusible** <br> `../insee/sirene/unites_legales/diffusibles/{siren}/siege`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'insee/siege_social_diffusibles') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1insee~1sirene~1unites_legales~1diffusibles~1{siren}~1siege_social/get') %>){:target="_blank"}|
                  | Adresse du siège social d´une unité légale "diffusible"  | API **Adresse établissement diffusible** <br> `../insee/sirene/etablissements/diffusibles/{siret}/adresse`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'adresse_etablissements_diffusibles') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1insee~1sirene~1etablissements~1diffusibles~1{siret}~1adresse/get') %>){:target="_blank"}|
                  | Numéro de TVA intracommunautaire | API **N°TVA intracommunautaire français** <br> `../european_commission/unites_legales/{siren}/numero_tva`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'commission_europeenne/numero_tva') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1european_commission~1unites_legales~1{siren}~1numero_tva/get') %>){:target="_blank"}|
                  | **API [Données de référence d'une entité - INSEE](https://v2.entreprise.api.gouv.fr/catalogue/#a-entreprises){:target="_blank"} <br> Avec** l'option d'appel des "non-diffusibles"| |
                  | Données concernant toutes les unités légales, y compris les "non-diffusibles".   | API **Données unité légale** <br> `../insee/sirene/unites_legales/{siren}`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'insee/unites_legales') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1insee~1sirene~1unites_legales~1{siren}/get') %>){:target="_blank"}<br> <br>Ces informations sont aussi disponibles depuis l'API **Données établissement** <br> `../insee/sirene/etablissements/{siret}`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'insee/etablissements') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1insee~1sirene~1etablissements~1{siret}/get') %>){:target="_blank"} <br> <br> 🎁 *Nouvelle donnée disponible :* Sexe des personnes physiques.<br> <br> ⚠️ *Suppression du champ  `raison_sociale` pour les personnes physiques en V.3* : par abus de langage, on parle de raison sociale ou dénomination pour les personnes physiques, or leur nom d'entreprise correspond toujours au nom de famille et au prénom, précédés ou suivis de la mention "entrepreneur individuel" ou "EI". En savoir plus sur [service-public.fr](https://entreprendre.service-public.fr/vosdroits/F23283/personnalisation/resultat){:target="_blank"}|
                  | Données concernant les mandataires sociaux de l'entreprise.   | API **Mandataires sociaux** <br> `../infogreffe/mandataires_sociaux/{siren}`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'infogreffe/mandataires_sociaux') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1infogreffe~1rcs~1unites_legales~1{siren}~1mandataires_sociaux/get') %>){:target="_blank"}<br> <br>🎁 *Nouvelle donnée disponible :* Lieu de naissance des mandataires sociaux.|
                  | Données concernant le siège social d'une unité légale, qu'elle soit "diffusible" ou non.  | API **Données siège social** <br> `../insee/sirene/unites_legales/{siren}/siege`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'insee/siege_social') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1insee~1sirene~1unites_legales~1{siren}~1siege_social/get') %>){:target="_blank"}|
                  | Adresse du siège social d´une unité légale, qu´elle soit "diffusible" ou non. | API **Adresse établissement** <br> `../insee/sirene/etablissements/{siret}/adresse`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'insee/adresse_etablissements') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1insee~1sirene~1etablissements~1{siret}~1adresse/get') %>){:target="_blank"}|
                  | Numéro de TVA intracommunautaire | API **N°TVA intracommunautaire français** <br> `../european_commission/unites_legales/{siren}/numero_tva`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'commission_europeenne/numero_tva') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1european_commission~1unites_legales~1{siren}~1numero_tva/get') %>){:target="_blank"}|


                  {:.fr-highlight}
                  > **Le champ booléen `dirigeant` des mandataires sociaux retiré en V.3 car non-effectif**
                  > En V.2, parmi les informations relatives aux mandataires sociaux, API&nbsp;Entreprise semblait transmettre une information sur le statut dirigeant ou non du mandataire social. Cette information n'était pas effective car toujours à `true`. Nous avons donc retiré ce champ inutile de l'[API V.3 Mandataires sociaux](<%= endpoint_path(uid: 'infogreffe/mandataires_sociaux') %>){:target="_blank"}.
                  > Pour connaître les rôles des mandataires sociaux, vous pouvez vous aider du champ `fonction` qui renvoie des valeurs telles que "PRESIDENT", "DIRECTEUR GENERALE".

                  <details class="fr-details">
                    <summary>
                     **Table de correspondance de tous les champs en V.2 et leurs équivalents en V.3**
                    </summary>

                  {:.fr-table.fr-table--very-large}
                  | [API V.2. Données de référence d'une entité](http://v2.entreprise.api.gouv.fr/entreprise.api.gouv.fr/catalogue/#a-entreprises){:target="_blank"}<br/><br/>Appelé avec SIREN | API V.3. Données établissement<br/><br/>Appelé avec SIRET  | API V.3. Mandataires sociaux - Infogreffe<br/><br/>Appelé avec SIREN | API V.3. Données siège social<br/><br/>Appelé avec SIREN | API V.3. Données unités légales<br/><br/>Appelé avec SIREN | API V.3. Adresse établissement<br/><br/>Appelé avec SIRET | API V.3. Extrait RCS - Infogreffe<br/><br/>Appelé avec SIREN | API V.3. Numéro de TVA Intra<br/><br/>Appelé avec SIREN |
                  |---|---|---|---|---|---|---|---|
                  | `"entreprise": {` | `"unite_legale"` |  |  | `"unite_legale"` |  |  |  |
                  |   `"siren": "418166096",` | ⚙️ Cette information va être prochainement remise en V.3. | ⚙️ Cette information va être prochainement remise en V.3. |  |  |  | ⚙️ Cette information va être prochainement remise en V.3. | ⚙️ Cette information va être prochainement remise en V.3. |
                  |   `"capital_social": 509525,` |  |  |  |  |  | `"capital": {` |  |
                  |  |  |  |  |  |  |    `"montant": "509525",` |  |
                  |  |  |  |  |  |  |    `"devise": "EUROS",` |  |
                  |  |  |  |  |  |  |    `"code_devise": "EUR"},` |  |
                  |   `"numero_tva_intracommunautaire": "FR16418166096",` |  |  |  |  |  |  | 🎁 `"tva_number": "FR48672039971"` - Cette donnée est certifiée contrairement à celle de la V.2 |
                  |   `"forme_juridique": "SA à directoire (s.a.i.)",` | `"libelle": "Service central d'un ministère"` dans `"forme_juridique"` |  |  | `"libelle": "Service central d'un ministère"` dans `"forme_juridique"` |  |  |  |
                  |   `"forme_juridique_code": "5699",` | `"code": "7120"` dans `"forme_juridique"` |  |  | `"code": "7120"` dans `"forme_juridique"` |  |  |  |
                  |   `"nom_commercial": "OCTO-TECHNOLOGY",` |  |  |  |  |  | `"nom_commercial": "DECATHLON",` |  |
                  |   `"procedure_collective": false,` | ❌ Supprimé : Cette information n'a jamais fonctionné en V.2. Nous n'avons pas l'information et avons donc supprimé le champ en V.3 |  |  |  |  |  |  |
                  |   `"enseigne": null,` | `"enseigne": "Coiff Land, CoiffureLand",` |  |  |  |  |  |  |
                  |   `"naf_entreprise": "6202A",` | `"code": "8411Z"` |  |  | `"code": "8411Z"` |  |  |  |
                  |   `"libelle_naf_entreprise": "Conseil en systèmes et logiciels informatiques",` | `"libelle": "Administration publique générale"` |  |  | `"libelle": "Administration publique générale"` |  |  |  |
                  |  | 🎁 `"nomenclature" : "NAFRev2"` -  Nouvelle donnée qui précise la nomenclature |  |  | 🎁 `"nomenclature" : "NAFRev2"` -  Nouvelle donnée qui précise la nomenclature |  |  |  |
                  |   `"raison_sociale": "OCTO-TECHNOLOGY"`, | `"raison_sociale": "DIRECTION INTERMINISTERIELLE DU NUMERIQUE"` |  |  | `"raison_sociale": "DIRECTION INTERMINISTERIELLE DU NUMERIQUE"` |  |  |  |
                  |   `"siret_siege_social": "41816609600051",` | `"siret_siege_social": "13002526500013"` |  |  | `"siret_siege_social": "13002526500013"` |  |  |  |
                  |   `"code_effectif_entreprise": "31",` | ❌ Supprimé car en double dans la payload |  |  | ❌ Supprimé car en double dans la payload |  |  |  |
                  |   `"date_creation": 891381600,` | `"date_creation": 1634103818` |  |  | `"date_creation": 1634103818` |  |  |  |
                  |   `"nom": null,` | `"nom_naissance": "Dubois"` |  |  | `"nom_naissance": "Dubois"` |  |  |  |
                  |  | 🎁 `"nom_usage": "Dupont"` -  Nouvelle donnée  |  |  | 🎁 `"nom_usage": "Dupont"` -  Nouvelle donnée  |  |  |  |
                  |   `"prenom": null,` | `"prenom_usuel": "Jean"` |  |  | `"prenom_usuel": "Jean"` |  |  |  |
                  |  | 🎁  `"prenom_1": "Jean"` -  Nouvelle donnée |  |  | 🎁  `"prenom_1": "Jean"` -  Nouvelle donnée |  |  |  |
                  |  | 🎁  `"prenom_2": "Jean"` -  Nouvelle donnée |  |  | 🎁  `"prenom_2": "Jean"` -  Nouvelle donnée |  |  |  |
                  |  | 🎁  `"prenom_3": "Jean"` -  Nouvelle donnée |  |  | 🎁  `"prenom_3": "Jean"` -  Nouvelle donnée |  |  |  |
                  |  | 🎁  `"prenom_4": "Jean"` -  Nouvelle donnée |  |  | 🎁  `"prenom_4": "Jean"` -  Nouvelle donnée |  |  |  |
                  |   `"date_radiation": null,` |   `"date_radiation": null,` |  |  |   `"date_radiation": null,` |  |  |  |
                  |   `"categorie_entreprise": "PME",` | `"categorie_entreprise": "GE"` |  |  | `"categorie_entreprise": "GE"` |  |  |  |
                  |   `"tranche_effectif_salarie_entreprise": {` | `"tranche_effectif_salarie"` |  |  | `"tranche_effectif_salarie"` |  |  |  |
                  |     `"de": 200,` | `"de": 2000` |  |  | `"de": 2000` |  |  |  |
                  |     `"a": 249,` | `"a": 4999` |  |  | `"a": 4999` |  |  |  |
                  |     `"code": "31",` | `"code": "51"` |  |  | `"code": "51"` |  |  |  |
                  |     `"date_reference": "2014",` | `"date_reference": "2016"` |  |  | `"date_reference": "2016"` |  |  |  |
                  |     `"intitule": "200 à 249 salariés"` | `"intitule": "2 000 à 4 999 salariés"` |  |  | `"intitule": "2 000 à 4 999 salariés"` |  |  |  |
                  |   `"mandataires_sociaux": [` |  |  |  |  |  |  |  |
                  |     `"nom": "Henri",` |  | `"nom": "GAUQUELIN"` |  |  |  | `"nom": "GAUQUELIN"` |  |
                  |     `"prenom": "Martin",` |  | `"prenom": "ARNAUD"` |  |  |  |  `"prenom": "Martin",`|  |
                  |     `"fonction": "Président du Directoire",` |  | `"fonction": "PRESIDENT"` |  |  |  | `"fonction": "Président du Directoire",` |  |
                  |     `"dirigeant": true,` |  | ❌ Supprimé car ce champ n'apportait aucune information : juridiquement tout mandataire est un dirigeant, le champ était donc toujours à true |  |  |  | ❌ Supprimé car ce champ n'apportait aucune information : juridiquement tout mandataire est un dirigeant, le champ était donc toujours à true |  |
                  |     `"date_naissance": "1965-01-27",` |  | `"date_naissance": "1969-08-24",` |  |  |  | `"date_naissance": "1965-01",` <br/> ⚠️ Uniquement le mois et l'année pour cette API aux données ouvertes  |  |
                  |     `"date_naissance_timestamp": -155523600,` |  | `"date_naissance_timestamp": -11235600,` |  |  |  | ❌ car le jour de naissance n'est pas donné |  |
                  |     `"raison_sociale": "",` |  | ❌ Supprimé. Il n'y a pas de raison sociale pour les p. physiques. Pour obtenir le nom de l'entreprise, vous pouvez concaténer le nom de famille, le prénom, avec un espace entre les deux, précédés ou suivis de la mention "entrepreneur individuel" ou "EI".|  |  |  |  |  |
                  |     `"identifiant": "",` |  | ❌ Supprimé pour les personnes physiques car toujours vide |  |  |  |  |  |
                  |     `"type": "PP"` |  | `"type": "personne_physique"` |  |  |  |  |  |
                  |  |  | 🎁 Nouveaux champs :<br/>-  `"lieu_naissance": "FLERS",`<br/>- `"pays_naissance": "FRANCE",`<br/>-  `"code_pays_naissance": "FR",`<br/>-  `"nationalite": "FRANCAISE",`<br/>-  `"code_nationalite": "FR"`  |
                  |  |  |  |  |  |
                  |     `"nom": "",` |  | ❌  Supprimé pour les personnes morales car toujours vide |  |  |  | ❌  Supprimé pour les personnes morales car toujours vide |  |
                  |     `"prenom": "",` |  | ❌  Supprimé pour les personnes morales car toujours vide |  |  |  | ❌  Supprimé pour les personnes morales car toujours vide |  |
                  |     `"fonction": "COMMISSAIRE AUX COMPTES SUPPLEANT",` |  | `"fonction": "COMMISSAIRE AUX COMPTES TITULAIRE",` |  |  |  | `"fonction": "COMMISSAIRE AUX COMPTES SUPPLEANT",` |  |
                  |     `"dirigeant": true,` |  | ❌ Supprimé car ce champ n'apportait aucune information : juridiquement tout mandataire est un dirigeant, le champ était donc toujours à true |  |  |  | ❌ Supprimé car ce champ n'apportait aucune information : juridiquement tout mandataire est un dirigeant, le champ était donc toujours à true |  |
                  |     `"date_naissance": "",` |  | ❌  Supprimé pour les personnes morales car toujours vide |  |  |  |  ❌  Supprimé pour les personnes morales car toujours vide |  |
                  |     `"date_naissance_timestamp": 0,` |  | ❌  Supprimé pour les personnes morales car toujours vide |  |  |  | ❌  Supprimé pour les personnes morales car toujours vide |  |
                  |     `"raison_sociale": "BCRH & ASSOCIES - SOCIETE A RESPONSABILITE LIMITEE A ASSOCIE UNIQUE",` |  | `"raison_sociale": "MAZARS - SOCIETE ANONYME A DIRECTOIRE ET CONSEIL DE SURVEILLANCE"` |  |  |  | `"raison_sociale": "BCRH & ASSOCIES - SOCIETE A RESPONSABILITE LIMITEE A ASSOCIE UNIQUE",` |  |
                  |     `"identifiant": "490092574",` |  | `"numero_identification": "784824153"` |  |  |  | `"numero_identification": "784824153"` |  |
                  |     `"type": "PM"` |  | `"type": "personne_morale"` |  |  |  | `"type": "personne_morale"` |  |
                  |   `"etat_administratif": {` |  |  |  |  |  |  |  |
                  |     `"value": "C",` | `"etat_administratif": "A",` |  |  |  |  |  |  |
                  |     `"date_cessation": 1315173600` | `"date_cessation": 1634133818,` |  |  |  |  |  |  |
                  |   `"diffusable_commercialement": true` |  `"diffusable_commercialement": true` |  |  |  |  |  |  |
                  | `"etablissement_siege": {` |  |  |  |  |  |  |  |
                  |   `"siege_social": true,` |  |  | `"siege_social": true` |  |  |  |  |
                  |   `"siret": "41816609600051",` |  |  | ⚙️ Cette information va être prochainement remise en V.3. |  | ⚙️ Cette information va être prochainement remise en V.3. |  |  |
                  |   `"naf": "6202A",` |  |  | `"code": "8411Z"` dans `"activite_principale"` |  |  |  |  |
                  |   `"libelle_naf": "Conseil en systèmes et logiciels informatiques",` |  |  | `"libelle": "Administration publique générale" dans "activite_principale"` |  |  |  |  |
                  |  |  |  | 🎁 `"nomenclature" : "NAFRev2"` -  Nouvelle donnée qui précise la nomenclature |  |  |  |  |
                  |   `"date_mise_a_jour": 1449183600,` |  |  |  |  |  |  |  |
                  |   `"tranche_effectif_salarie_etablissement": {` |  |  | `"tranche_effectif_salarie"` |  |  |  |  |
                  |     `"de": 200,` |  |  | `"de": 2000` |  |  |  |  |
                  |     `"a": 249,` |  |  | `"de": 2000` |  |  |  |  |
                  |     `"code": "31",` |  |  | `"code": "51"` |  |  |  |  |
                  |     `"date_reference": "2014",` |  |  | `"date_reference": "2016"` |  |  |  |  |
                  |     `"intitule": "200 à 249 salariés"` |  |  | `"intitule": "2 000 à 4 999 salariés"` |  |  |  |  |
                  |   }, |  |  |  |  |  |  |  |
                  |  `"date_creation_etablissement": 1108594800,` |  |  | `"date_creation": 1634103818` |  |  |  |  |
                  |   `"enseigne": null,` |  |  | `"enseigne": "Coiff Land, CoiffureLand",` |  |  |  |  |
                  |   `"region_implantation": {` |  |  | ❌ Supprimé, cette information, retrouvable autrement, ralentissait l'API. Nous l'avons supprimé en V.3. |  |  |  |  |
                  |     `"code": "11",` |  |  | ❌ Supprimé, cette information, retrouvable autrement, ralentissait l'API. Nous l'avons supprimé en V.3. |  |  |  |  |
                  |     `"value": "Île-de-France"` |  |  | ❌ Supprimé, cette information, retrouvable autrement, ralentissait l'API. Nous l'avons supprimé en V.3. |  |  |  |  |
                  |   }, |  |  |  |  |  |  |  |
                  |   `"commune_implantation": {` |  |  |  |  |  |  |  |
                  |     `"code": "75108",` |  |  | ❌ Supprimé car en double dans la payload |  |  |  |  |
                  |     `"value": "PARIS 8"` |  |  | ❌ Supprimé car en double dans la payload |  |  |  |  |
                  |   `"pays_implantation": {` |  |  |  |  |  |  |  |
                  |     `"code": null,` |  |  | Remplacé par `"code_pays_etranger": "99132"` |  |  |  |  |
                  |     `"value": null` |  |  | Remplacé par `"libelle_pays_etranger": "ROYAUME-UNI"` |  |  |  |  |
                  |   `"diffusable_commercialement": true,` |  |  | `"diffusable_commercialement": true,` |  |  |  |  |
                  |   `"adresse": {` |  |  |  |  |  |  |  |
                  |     `"l1": "OCTO TECHNOLOGY",` |  |  | `"l1": "ipsum"` dans `"acheminement_postal"`|  | `"l1": "ipsum"` dans `"acheminement_postal"` |  |  |
                  |     `"l2": null,` |  |  | `"l2": "ipsum"` dans `"acheminement_postal"` |  | `"l2": "ipsum"` dans `"acheminement_postal"` |  |  |
                  |     `"l3": null,` |  |  | `"l3": "ipsum"` dans `"acheminement_postal"` |  | `"l3": "ipsum"` dans `"acheminement_postal"` |  |  |
                  |     `"l4": "50 AVENUE DES CHAMPS ELYSEES",` |  |  | `"l4": "ipsum"` dans `"acheminement_postal"` |  | `"l4": "ipsum"` dans `"acheminement_postal"` |  |  |
                  |     `"l5": null,` |  |  | `"l5": "ipsum"` dans `"acheminement_postal"` |  | `"l5": "ipsum"` dans `"acheminement_postal"` |  |  |
                  |     `"l6": "75008 PARIS",` |  |  | `"l6": "ipsum"` dans `"acheminement_postal"` |  | `"l6": "ipsum"` dans `"acheminement_postal"` |  |  |
                  |     `"l7": "FRANCE",` |  |  | `"l7": "ipsum"` dans `"acheminement_postal"` |  | `"l7": "ipsum"` dans `"acheminement_postal"` |  |  |
                  |     `"numero_voie": "50",` |  |  | `"numero_voie": "22",` |  | `"numero_voie": "22",` |  |  |
                  |  |  |  | `"indice_repetition_voie": "lorem"` - Donnée désormais séparée du numéro de voie |  | 🎁  `"indice_repetition_voie": "lorem"` - Nouvelle donnée |  |  |
                  |     `"type_voie": "AV",` |  |  | `"type_voie": "RUE",` |  | `"type_voie": "RUE",` |  |  |
                  |     `"nom_voie": "DES CHAMPS ELYSEES",` |  |  | `"libelle_voie": "ipsum",` |  | `"libelle_voie": "ipsum",` |  |  |
                  |     `"complement_adresse": null,` |  |  | `"complement_adresse": "ZAE SAINT GUENAULT",` |  |`"complement_adresse": "ZAE SAINT GUENAULT",` |  |  |
                  |     `"code_postal": "75008",` |  |  | `"code_postal": "75016",` |  | `"code_postal": "75016",` |  |  |
                  |     `"localite": "PARIS 8",` |  |  | `"libelle_commune": "PARIS 12"` |  | `"libelle_commune": "PARIS 12"` |  |  |
                  |     `"code_insee_localite": "75108",` |  |  | `"code_commune": "75112"` |  | `"code_commune": "75112"` |  |  |
                  |     `"cedex": null` |  |  | `"code_cedex": "ipsum",` |  | `"code_cedex": "ipsum",` |  |  |
                  |  |  |  | 🎁 `"libelle_cedex": "PARIS CEDEX 12"` - Nouvelle donnée  |  | 🎁 `"libelle_cedex": "PARIS CEDEX 12"` - Nouvelle donnée  |  |  |
                  |  |  |  | 🎁 `"distribution_speciale": "ipsum"` - Nouvelle donnée |  | 🎁 `"distribution_speciale": "ipsum"` - Nouvelle donnée |  |  |
                  |   }, |  |  |  |  |  |  |  |
                  |   `"etat_administratif": {` |  |  |  |  |  |  |  |
                  |     `"value": "F",` |  |  | `"etat_administratif": "A"` |  |  |  |  |
                  |     `"date_fermeture": 1315173600` |  |  | `"date_fermeture": 1634133818` |  |  |  |  |
                  |   `"gateway_error": false` |  |  | ❌ Supprimé, information technique API Entreprise complexe et peu utile |  |  |  |  |

                  </details>

                  <div class="fr-download fr-mt-4w fr-mb-1v fr-ml-2w">
                    <p>
                      <a href="/files/correspondance_champs_v2_entreprises.pdf" download class="fr-download__link">Télécharger le tableau PDF de correspondance des champs de l'API V2 Entreprises Insee
                        <span class="fr-download__detail">PDF – 94 ko</span>
                      </a>
                    </p>
                  </div>

                  <div class="fr-download fr-mt-1v fr-ml-2w">
                    <p>
                      <a href="/files/correspondance_champs_v2_v3_insee.xlsx" download class="fr-download__link">Télécharger le tableur de correspondance des champs des API V2 Entreprises et Etablissements Insee
                        <span class="fr-download__detail">XLSX – 22 ko</span>
                      </a>
                    </p>
                  </div>

              - title: V.2 - Données de référence d'un établissement - INSEE<a name="v2/etablissements"></a>
                anchor: 'v2---données-de-référence-dun-établissement---insee-'
                content: |+
                  L'API V.2 `/etablissement` de l'INSEE devient l'**API centrale des données Insee en V.3**. À partir du SIRET de l'établissement, vous récupérez les données de l'établissement, dont son adresse postale, ainsi que les données de l'unité légale qui le concerne.

                  La distinction entre les "diffusibles" et les "non-diffusibles" n'est plus faite par une option d'appel. Nous avons créé des API distinctes :

                  {:.fr-table}
                  | API V.2  | API V.3+ correspondantes |
                  | :--- | :--- |
                  | **API [Données de référence d'un établissement - INSEE](https://v2.entreprise.api.gouv.fr/catalogue/#a-etablissements){:target="_blank"}** | |
                  |**Sans** l'option d'appel des "non-diffusibles"  | API **Données établissement diffusible** <br> `../insee/sirene/etablissements/diffusibles/{siret}`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'insee/etablissements_diffusibles') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1insee~1sirene~1etablissements~1diffusibles~1{siret}/get') %>){:target="_blank"}<br> <br> 🧩 Cette API délivre en plus des informations sur l'unité légale de l'établissement. |
                  |**Avec** l'option d'appel des "non-diffusibles"  | API **Données établissement** <br> `../insee/sirene/etablissements/{siret}`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'insee/etablissements') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1insee~1sirene~1etablissements~1{siret}/get') %>){:target="_blank"} <br> <br> 🧩 Cette API délivre en plus des informations sur l'unité légale de l'établissement.|

                   <details class="fr-details">
                    <summary>
                     **Table de correspondance de tous les champs en V.2 et leurs équivalents en V.3**
                    </summary>

                    {:.fr-table.fr-table--bordered.fr-table--large}
                  | **[API V.2. Données de référence d'un établissement](http://v2.entreprise.api.gouv.fr/entreprise.api.gouv.fr/catalogue/#a-etablissements){:target="_blank"}** <br/><br/>_Appelé avec SIRET_ | **API V.3. Données établissement** <br/><br/>_Appelé avec SIRET_ | **API V.3. Données siège social** <br/><br/>_Appelé avec SIREN_ | **API V.3. Adresse établissement** <br/><br/>_Appelé avec SIRET_ |
                  |---|---|---|---|
                  | **`"etablissement": {`** |  |  |  |
                  | **`"siege_social": true,`** | `"siege_social": false` | `"siege_social": true` |  |
                  | **`"siret": "41816609600051",`** | ⚙️ Cette information va être prochainement remise en V.3. | ⚙️ Cette information va être prochainement remise en V.3. | ⚙️ Cette information va être prochainement remise en V.3. |
                  | **`"naf": "6202A",`** | `"code": "8411Z"` dans `"activite_principale"` | `"code": "8411Z"` dans `"activite_principale"` |  |
                  | **`"libelle_naf": "Conseil en systèmes et logiciels informatiques"`,** | `"libelle": "Administration publique générale"` dans `"activite_principale"` | `"libelle": "Administration publique générale"` dans `"activite_principale"` |  |
                  |  | 🎁 `"nomenclature" : "NAFRev2"` -  Nouvelle donnée qui précise la nomenclature | 🎁 `"nomenclature" : "NAFRev2"` -  Nouvelle donnée qui précise la nomenclature |  |
                  | **`"date_mise_a_jour": "1449183600,"`** |  |  |  |
                  | **`"tranche_effectif_salarie_etablissement": {`** | `"tranche_effectif_salarie"` | `"tranche_effectif_salarie"` |  |
                  | **`"de": 200,`** | `"de": 2000` | `"de": 2000` |  |
                  | **`"a": 249,`** | `"de": 2000` | `"de": 2000` |  |
                  | **`"code": "31",`** | `"code": "51"` | `"code": "51"` |  |
                  | **`"date_reference": "2014",`** | `"date_reference": "2016"` | `"date_reference": "2016"` |  |
                  | **`"intitule": "200 à 249 salariés"`** | `"intitule": "2 000 à 4 999 salariés"` | `"intitule": "2 000 à 4 999 salariés"` |  |
                  | **`"date_creation_etablissement": 1108594800,`** | `"date_creation": 1634103818"` | `"date_creation": 1634103818` |  |
                  | **`"region_implantation": {`** | ❌ Supprimé, cette information, retrouvable autrement, ralentissait l'API. Nous l'avons supprimé en V.3. | ❌ Supprimé, cette information, retrouvable autrement, ralentissait l'API. Nous l'avons supprimé en V.3. |  |
                  | **`"code": "11",`** | ❌ Supprimé, cette information, retrouvable autrement, ralentissait l'API. Nous l'avons supprimé en V.3. | ❌ Supprimé, cette information, retrouvable autrement, ralentissait l'API. Nous l'avons supprimé en V.3. |  |
                  | **`"value": "Île-de-France"`** | ❌ Supprimé, cette information, retrouvable autrement, ralentissait l'API. Nous l'avons supprimé en V.3. | ❌ Supprimé, cette information, retrouvable autrement, ralentissait l'API. Nous l'avons supprimé en V.3. |  |
                  | **`"commune_implantation": {`** |  |  |  |
                  | **`"code": "75108",`** | ❌ Supprimé car en double dans la payload | ❌ Supprimé car en double dans la payload |  |
                  | **`"value": "PARIS 8"`** | ❌ Supprimé car en double dans la payload | ❌ Supprimé car en double dans la payload |  |
                  | **`"pays_implantation": {`** |  |  |  |
                  | **`"code": "FR",`** | Remplacé par `"code_pays_etranger": "99132"` | Remplacé par `"code_pays_etranger": "99132"` |  |
                  | **`"value": "FRANCE"`** | Remplacé par `"libelle_pays_etranger": "ROYAUME-UNI"` | Remplacé par `"libelle_pays_etranger": "ROYAUME-UNI"` |  |
                  | **`"diffusable_commercialement": true,`** | `"diffusable_commercialement": true,` | `"diffusable_commercialement": true,` |  |
                  | **`"enseigne": null,`** | `"enseigne": "Coiff Land, CoiffureLand",` | `"enseigne": "Coiff Land, CoiffureLand",` |  |
                  | **`"adresse": {`** |  |  |  |
                  | **`"l1": "OCTO TECHNOLOGY",`** | `"l1": "ipsum"` dans `"acheminement_postal"` | `"l1": "ipsum"` dans `"acheminement_postal"` | `"l1": "ipsum"` dans `"acheminement_postal"` |
                  | **`"l2": null,`** | `"l2": "ipsum"` dans `"acheminement_postal"` | `"l2": "ipsum"` dans `"acheminement_postal"` | `"l2": "ipsum"` dans `"acheminement_postal"` |
                  | **`"l3": null,`** | `"l3": "ipsum"` dans `"acheminement_postal"` | `"l3": "ipsum"` dans `"acheminement_postal"` | `"l3": "ipsum"` dans `"acheminement_postal"` |
                  | **`"l4": "50 AVENUE DES CHAMPS ELYSEES",`** | `"l4": "ipsum"` dans `"acheminement_postal"` | `"l4": "ipsum"` dans `"acheminement_postal"` | `"l4": "ipsum"` dans `"acheminement_postal"` |
                  | **`"l5": null,`** | `"l5": "ipsum"` dans `"acheminement_postal"` | `"l5": "ipsum"` dans `"acheminement_postal"` | `"l5": "ipsum"` dans `"acheminement_postal"` |
                  | **`"l6": "75008 PARIS",`** | `"l6": "ipsum"` dans `"acheminement_postal"` | `"l6": "ipsum"` dans `"acheminement_postal"` | `"l6": "ipsum"` dans `"acheminement_postal"` |
                  | **`"l7": "FRANCE",`** | `"l7": "ipsum"` dans `"acheminement_postal"` | `"l7": "ipsum"` dans `"acheminement_postal"` | `"l7": "ipsum"` dans `"acheminement_postal"` |
                  | **`"numero_voie": "50",`** | `"numero_voie": "22",` | `"numero_voie": "22",` | `"numero_voie": "22",` |
                  |  | 🎁 `"indice_repetition_voie": "lorem"` - Nouvelle donnée | 🎁 `"indice_repetition_voie": "lorem"` - Nouvelle donnée | 🎁 `"indice_repetition_voie": "lorem"` - Nouvelle donnée |
                  | **`"type_voie": "AV",`** | `"type_voie": "RUE",` | `"type_voie": "RUE",`| `"type_voie": "RUE",` |
                  | **`"nom_voie": "DES CHAMPS ELYSEES",`** | `"libelle_voie": "ipsum",` | `"libelle_voie": "ipsum",` | `"libelle_voie": "ipsum",` |
                  | **`"complement_adresse": null,`** | `"complement_adresse": "ZAE SAINT GUENAULT",` | `"complement_adresse": "ZAE SAINT GUENAULT",` | `"complement_adresse": "ZAE SAINT GUENAULT",` |
                  | **`"code_postal": "75008",`** | `"code_postal": "75016",` | `"code_postal": "75016",` | `"code_postal": "75016",` |
                  | **`"localite": "PARIS 8",`** | `"libelle_commune": "PARIS 12"` | `"libelle_commune": "PARIS 12"` | `"libelle_commune": "PARIS 12"` |
                  | **`"code_insee_localite": "75108",`** | `"code_commune": "75112"` | ""code_commune": "75112"" | ""code_commune": "75112"" |
                  | **`"cedex": null"`** | `"code_cedex": "ipsum",` | `"code_cedex": "ipsum",` | `"code_cedex": "ipsum",` |
                  | | 🎁 `"libelle_cedex": "PARIS CEDEX 12"` - Nouvelle donnée | 🎁 `"libelle_cedex": "PARIS CEDEX 12"` - Nouvelle donnée | 🎁 `"libelle_cedex": "PARIS CEDEX 12"` - Nouvelle donnée |
                  | | 🎁 `"distribution_speciale": "ipsum"` - Nouvelle donnée | 🎁 `"distribution_speciale": "ipsum"` - Nouvelle donnée | 🎁 `"distribution_speciale": "ipsum"` - Nouvelle donnée |
                  | **`"etat_administratif": {`** |  |  |  |
                  | **`"value": "F",`** | `"etat_administratif": "A"` | `"etat_administratif": "A"` |  |
                  | **`"date_fermeture": 1315173600"`** | `"date_fermeture": 1634133818"` | `"date_fermeture": 1634133818"` |  |
                  | **`"gateway_error": false"`** | ❌ Supprimé, information technique API Entreprise complexe et peu utile | ❌ Supprimé, information technique API Entreprise complexe et peu utile" |  |

                  </details>


                  <div class="fr-download fr-mt-4w fr-mb-1v fr-ml-2w">
                    <p>
                      <a href="/files/correspondance_champs_v2_etablissements.pdf" download class="fr-download__link">Télécharger le tableau PDF de correspondance des champs de l'API V2 Établissements Insee
                        <span class="fr-download__detail">PDF – 75 ko</span>
                      </a>
                    </p>
                  </div>

                  <div class="fr-download fr-mt-1v fr-ml-2w">
                    <p>
                      <a href="/files/correspondance_champs_v2_v3_insee.xlsx" download class="fr-download__link">Télécharger le tableur de correspondance des champs des API V2 Entreprises et Etablissements Insee
                        <span class="fr-download__detail">XLSX – 22 ko</span>
                      </a>
                    </p>
                  </div>

              - title: V.2 - Extrait RCS - Infogreffe <a name="v2/extrait_rcs"></a>
                anchor: 'v2---extrait-rcs---infogreffe-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Extrait RCS - Infogreffe](https://v2.entreprise.api.gouv.fr/catalogue/#a-extraits_rcs_infogreffe){:target="_blank"}** | API **Extrait RCS** <br> `../infogreffe/rcs/unites_legales/{siren}/extrait_kbis`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'infogreffe/rcs/extrait') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1infogreffe~1rcs~1unites_legales~1{siren}~1extrait_kbis/get') %>){:target="_blank"} |


              - title: V.2 - Informations déclaratives d'une association - Ministère de l'Intérieur <a name="v2/associations"></a>
                anchor: 'v2---informations-déclaratives-dune-association---ministère-de-lintérieur-'
                content: |+
                  La migration V.3 introduit de nouvelles données sur les associations. Par conséquent, en migrant, vous trouverez deux nouvelles API :
                  - Une **API en open data**, délivrant le même type d'informations que celles données par l'API V.2 données RNA d'une association et l'API V.2 Divers documents d'une associations.
                  - 🎁 Une **API délivrant de nouvelles données** : des informations protégées uniquement accessibles aux agents publics habilités. Il vous faudra effectuer une demande d'habilitation pour accéder à cette API. Pour élargir votre périmètre des API accessibles, consulter cette [rubrique de la FAQ](https://entreprise.api.gouv.fr/faq#comment-elargir-le-perimetre-des-api-disponibles-avec-mon-jeton-obtenir-de-nouvelles-donnees).

                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Informations déclaratives d’une association - Ministère de l'Intérieur](https://v2.entreprise.api.gouv.fr/catalogue/#a-associations){:target="_blank"}** | API **Données association en open data - DJEPVA** <br> `v4/djepva/api-association/associations/open_data/{siren_or_rna}`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'djepva/associations_open_data') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v4~1djepva~1api-association~1associations~1open_data~1{siren_or_rna}/get') %>){:target="_blank"}<br><br>**🎁 Plus de données disponibles** avec la nouvelle [API Données associations - DJEPVA](<%= endpoint_path(uid: 'djepva/associations') %>){:target="_blank"}.  |

              - title: V.2 - Divers documents d'une association - Ministère de l'Intérieur <a name="v2/doc-associations"></a>
                anchor: 'v2---divers-documents-dune-association---ministère-de-lintérieur-'
                content: |+
                  La migration V.3 introduit de nouvelles données sur les associations. Par conséquent, en migrant, vous trouverez deux nouvelles API :
                  - Une **API en open data**, délivrant le même type d'informations que celles données par l'API V.2 données RNA d'une association et l'API V.2 Divers documents d'une associations.
                  - 🎁 Une **API délivrant de nouvelles données** : des informations protégées uniquement accessibles aux agents publics habilités. Il vous faudra effectuer une demande d'habilitation pour accéder à cette API. Pour élargir votre périmètre des API accessibles, consulter cette [rubrique de la FAQ](https://entreprise.api.gouv.fr/faq#comment-elargir-le-perimetre-des-api-disponibles-avec-mon-jeton-obtenir-de-nouvelles-donnees).

                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Divers documents d'une association - Ministère de l'Intérieur](https://v2.entreprise.api.gouv.fr/catalogue/#a-documents_associations){:target="_blank"}** | API **Données association en open data - DJEPVA** <br> `v4/djepva/api-association/associations/open_data/{siren_or_rna}`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'djepva/associations_open_data') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v4~1djepva~1api-association~1associations~1open_data~1{siren_or_rna}/get') %>){:target="_blank"}<br><br>**🎁 Plus de données disponibles** avec la nouvelle [API Données associations - DJEPVA](<%= endpoint_path(uid: 'djepva/associations') %>){:target="_blank"}. |

              - title: V.2 - Actes - INPI <a name="v2/actes"></a>
                anchor: 'v2---actes---inpi-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Actes - INPI](https://v2.entreprise.api.gouv.fr/catalogue/#a-actes_inpi){:target="_blank"}** | API **Actes** <br> `../inpi/unites_legales/{siren}/actes`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'inpi/actes') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1inpi~1unites_legales~1{siren}~1actes/get') %>){:target="_blank"} |

              - title: V.2 - Conventions collectives - Fabrique numérique des Ministères sociaux <a name="v2/conventions-collectives"></a>
                anchor: 'v2---conventions-collectives---fabrique-numérique-des-ministères-sociaux-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Conventions collectives - Fabrique numérique des Ministères sociaux](https://v2.entreprise.api.gouv.fr/catalogue/#a-conventions_collectives){:target="_blank"}** | API **Conventions collectives** <br> `../fabrique_numerique_ministeres_sociaux/etablissements/{siret}/conventions_collectives`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'fabrique_numerique_ministeres_sociaux/conventions_collectives') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1fabrique_numerique_ministeres_sociaux~1etablissements~1{siret}~1conventions_collectives/get') %>){:target="_blank"} |


              - title: V.2 - Données de référence d'une entreprise artisanale - CMA France <a name="v2/entreprises-artisanales"></a>
                anchor: 'v2---données-de-référence-dune-entreprise-artisanale---cma-france-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Données de référence d'une entreprise artisanale - CMA France](https://v2.entreprise.api.gouv.fr/catalogue/#a-entreprises_artisanales_cma){:target="_blank"}** | API **Données du RNM d'une entreprise artisanale** <br> `../cma_france/rnm/unites_legales/{siren}`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'cma_france/rnm') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1cma_france~1rnm~1unites_legales~1{siren}/get') %>){:target="_blank"} |


              - title: V.2 - Effectifs d'une entreprise - URSSAF <a name="v2/effectifs"></a>
                anchor: 'v2---effectifs-dune-entreprise---urssaf-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Effectifs d'une entreprise - URSSAF](https://v2.entreprise.api.gouv.fr/catalogue/#a-effectifs_..._acoss_covid){:target="_blank"}** |  API **Effectifs** <br> [📖 Fiche métier](<%= endpoint_path(uid: 'urssaf/effectifs') %>){:target="_blank"} <br> ⚙️ Swagger prochainement disponible  |


              - title: V.2 - Immatriculations EORI -  Douanes <a name="v2/eori"></a>
                anchor: 'v2---immatriculations-eori----douanes-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Immatriculations EORI -  Douanes](https://v2.entreprise.api.gouv.fr/catalogue/#a-eori_douanes){:target="_blank"}** | API **Immatriculations EORI** <br> `../douanes/etablissements/{siret_or_eori}/immatriculations_eori`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'douanes/immatriculation_eori') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1douanes~1etablissements~1{siret_or_eori}~1immatriculations_eori/get') %>){:target="_blank"} |


              - title: V.2 - Chiffre d'affaires - DGFIP <a name="v2/exercices"></a>
                anchor: 'v2---chiffre-daffaires---dgfip-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Chiffre d'affaires - DGFIP](https://v2.entreprise.api.gouv.fr/catalogue/#a-exercices){:target="_blank"}** | API **Chiffre d'affaires** <br> `../dgfip/etablissements/{siret}/chiffres_affaires`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'dgfip/chiffres_affaires') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-financieres/paths/~1v3~1dgfip~1etablissements~1{siret}~1chiffres_affaires/get') %>){:target="_blank"} |


              - title: V.2 - Bilans annuels - INPI <a name="v2/bilans-inpi"></a>
                anchor: 'v2---bilans-annuels---inpi-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Bilans annuels - INPI](https://v2.entreprise.api.gouv.fr/catalogue/#a-bilans_inpi){:target="_blank"}** | API **Comptes annuels du RNCS** <br> <br> [📖 Fiche métier](<%= endpoint_path(uid: 'inpi/comptes_annuels_rncs') %>){:target="_blank"} <br> ⚙️ Swagger prochainement disponible |


              - title: V.2 - 3 derniers bilans annuels - Banque de France <a name="v2/bilans-bdf"></a>
                anchor: 'v2---3-derniers-bilans-annuels---banque-de-france-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [3 derniers bilans annuels - Banque de France](https://v2.entreprise.api.gouv.fr/catalogue/#a-bilans_entreprises_bdf){:target="_blank"}** |  API **Trois derniers bilans annuels** <br> <br> [📖 Fiche métier](<%= endpoint_path(uid: 'banque_de_france/bilans') %>){:target="_blank"} <br> ⚙️ Swagger prochainement disponible  |


              - title: V.2 - Déclarations de résultats - DGFIP <a name="v2/liasses-fiscales"></a>
                anchor: 'v2---déclarations-de-résultats---dgfip-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Déclarations de résulats - DGFIP](https://v2.entreprise.api.gouv.fr/catalogue/#a-liasses_fiscales_dgfip){:target="_blank"}** | API **Liasses fiscales** <br> `../dgfip/unites_legales/{siren}/liasses_fiscales/{year}`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'dgfip/liasses_fiscales') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Informations-financieres/paths/~1v3~1dgfip~1unites_legales~1{siren}~1liasses_fiscales~1{year}/get') %>){:target="_blank"} |


              - title: V.2 - Attestation fiscale - DGFIP <a name="v2/attestation-fiscale"></a>
                anchor: 'v2---attestation-fiscale---dgfip-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Attestation fiscale - DGFIP](https://v2.entreprise.api.gouv.fr/catalogue/#a-attestations_fiscales_dgfip){:target="_blank"}** | API **Attestation fiscale - DGFIP** <br> `../dgfip/unites_legales/{siren}/attestation_fiscale`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'dgfip/attestations_fiscales') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Attestations-sociales-et-fiscales/paths/~1v3~1dgfip~1unites_legales~1{siren}~1attestation_fiscale/get') %>){:target="_blank"} |

              - title: V.2 - Attestation de vigilance - ACOSS <a name="v2/attestation-vigilance"></a>
                anchor: '#v2---attestation-de-vigilance---acoss-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Attestation de vigilance - ACOSS](https://v2.entreprise.api.gouv.fr/catalogue/#a-attestations_sociales_acoss){:target="_blank"}** | API **Attestation de vigilance - URSSAF Caisse nationale** <br> `../urssaf/unites_legales/{siren}/attestation_vigilance`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'urssaf/attestation_vigilance') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Attestations-sociales-et-fiscales/paths/~1v4~1urssaf~1unites_legales~1{siren}~1attestation_vigilance/get') %>){:target="_blank"} |

              - title: V.2 - Conformité emploi des travailleurs handicapés - Agefiph <a name="v2/conformite-emploi-handicapes"></a>
                anchor: 'v2---conformité-emploi-des-travailleurs-handicapés---agefiph-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Conformité emploi des travailleurs handicapés - Agefiph](https://v2.entreprise.api.gouv.fr/catalogue/#a-attestations_agefiph){:target="_blank"}** | ❌ Ressource supprimée en V3 - *Depuis 2021, la contribution annuelle de l’OETH (Obligation d’Emploi de Travailleur Handicapé) relève de l'URSSAF et non plus de l'Agefiph*. <br> <br> La conformité à l'OETH est donc désormais incluse dans l'[API attestation de vigileance - URSSAF](<%= endpoint_path(uid: 'urssaf/attestation_vigilance') %>){:target="_blank"} ou dans l'[API conformité cotisations de sécurité sociale agricole - MSA](<%= endpoint_path(uid: 'msa/conformites_cotisations') %>){:target="_blank"} pour les entreprises relevant du régime agricole. |

              - title: V.2 - Cotisations de sécurité agricole - MSA <a name="v2/cotis-secu-agricole"></a>
                anchor: 'v2---cotisations-de-sécurité-agricole---msa-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Cotisations de sécurité agricole - MSA](https://v2.entreprise.api.gouv.fr/catalogue/#a-cotisations_msa){:target="_blank"}** | API **Conformité cotisations de sécurité sociale agricole** <br> `../msa/etablissements/{siret}/conformite_cotisations`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'msa/conformites_cotisations') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Attestations-sociales-et-fiscales/paths/~1v3~1msa~1etablissements~1{siret}~1conformite_cotisations/get') %>){:target="_blank"} |

              - title: V.2 - Cotisations retraite bâtiment - PROBTP <a name="v2/cotis-retraite-batiment"></a>
                anchor: 'v2---cotisations-retraite-bâtiment---probtp-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Cotisations retraite bâtiment - PROBTP](https://v2.entreprise.api.gouv.fr/catalogue/#a-cotisation_retraite_probtp){:target="_blank"}** | API **Conformité cotisations retraite bâtiment** <br> <br> [📖 Fiche métier](<%= endpoint_path(uid: 'probtp/conformites_cotisations_retraite') %>){:target="_blank"} <br> ⚙️ Swagger prochainement disponible  <br> <br> 🚀 En V.3, plus besoin de faire deux appels différents. **Avec un seul appel, vous obtenez l'état de conformité et l'URL de téléchargement** de l'attestation si elle est disponible. |

              - title: V.2 - Carte professionnelle travaux publics - FNTP <a name="v2/carte-pro-travaux-publics"></a>
                anchor: 'v2---carte-professionnelle-travaux-publics---fntp-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Carte professionnelle travaux publics - FNTP](https://v2.entreprise.api.gouv.fr/catalogue/#a-cartes_professionnelles_fntp){:target="_blank"}** | API **Carte professionnelle travaux publics** <br> `../fntp/unites_legales/{siren}/carte_professionnelle_travaux_publics`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'fntp/carte_professionnelle_travaux_public') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Attestations-sociales-et-fiscales/paths/~1v3~1fntp~1unites_legales~1{siren}~1carte_professionnelle_travaux_publics/get') %>){:target="_blank"} |


              - title: V.2 - Cotisations congés payés & chômage intempéries - CNETP <a name="v2/cotis-conges-payes-chomage-intemperies"></a>
                anchor: 'v2---cotisations-congés-payés--chômage-intempéries---cnetp-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Cotisations congés payés & chômage intempéries - CNETP](https://v2.entreprise.api.gouv.fr/catalogue/#a-certificats_cnetp){:target="_blank"}** | API **Attestation de cotisations congés payés & chômage-intempéries** <br> `../cnetp/unites_legales/{siren}/attestation_cotisations_conges_payes_chomage_intemperies`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'cnetp/attestations_cotisations_conges_payes_chomage_intemperies') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Attestations-sociales-et-fiscales/paths/~1v3~1cnetp~1unites_legales~1{siren}~1attestation_cotisations_conges_payes_chomage_intemperies/get') %>){:target="_blank"}|

              - title: V.2 - Certification en BIO - Agence BIO <a name="v2/certif-bio"></a>
                anchor: 'v2---cotisations-congés-payés--chômage-intempéries---cnetp-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Certification en BIO - Agence BIO](https://v2.entreprise.api.gouv.fr/catalogue/#a-certificats_agence_bio){:target="_blank"}** |  API **Certifications en BIO** <br> <br> [📖 Fiche métier](<%= endpoint_path(uid: 'agence_bio/certifications_bio') %>){:target="_blank"} <br> ⚙️ Swagger prochainement disponible  |


              - title: V.2 - Certification RGE - ADEME <a name="v2/rge-ademe"></a>
                anchor: 'v2---certification-rge---ademe-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Certification RGE - ADEME](https://v2.entreprise.api.gouv.fr/catalogue/#a-certificats_rge_ademe){:target="_blank"}** | API **Certificat RGE** <br> `../ademe/etablissements/{siret}/certification_rge`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'ademe/certifications_rge') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Certifications-professionnelles/paths/~1v3~1ademe~1etablissements~1{siret}~1certification_rge/get') %>){:target="_blank"} |

              - title: V.2 - Certification de qualification du bâtiment - Qualibat <a name="v2/qualibat"></a>
                anchor: 'v2---certification-de-qualification-du-bâtiment---qualibat-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Certification de qualification du bâtiment - Qualibat](https://v2.entreprise.api.gouv.fr/catalogue/#a-certificats_qualibat){:target="_blank"}** | API **Certification Qualibat** <br> `../qualibat/etablissements/{siret}/certification_batiment`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'qualibat/certifications_batiment') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Certifications-professionnelles/paths/~1v3~1qualibat~1etablissements~1{siret}~1certification_batiment/get') %>){:target="_blank"} |

              - title: V.2 - Certification de qualification d'ingénierie - OPQIBI <a name="v2/certif-opqibi"></a>
                anchor: 'v2---certification-de-qualification-dingénierie---opqibi-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondante |
                  | :--- | :--- |
                  | **API [Certification de qualification d'ingénierie - OPQIBI](https://v2.entreprise.api.gouv.fr/catalogue/#a-certificats_opqibi){:target="_blank"}** |  API **Certification d'ingénierie OPQIBI** <br> <br> [📖 Fiche métier](<%= endpoint_path(uid: 'opqibi/qualifications_ingenierie') %>){:target="_blank"} <br> ⚙️ Swagger prochainement disponible  |

              - title: V.2 - Brevets, modèles et marques déposés - INPI <a name="v2/brevet-modeles-marques"></a>
                anchor: 'v2---brevets-modèles-et-marques-déposés---inpi-'
                content: |+
                  {:.fr-table}
                  | API V.2  | API V.3+ correspondantes |
                  | :--- | :--- |
                  | **API [Brevets, modèles et marques déposés - INPI](https://v2.entreprise.api.gouv.fr/catalogue/#a-extraits_courts_inpi){:target="_blank"}** | |
                  | Données des brevets | API **Brevets déposés** <br> `../inpi/unites_legales/{siren}/brevets`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'inpi/brevets') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Propriete-intellectuelle/paths/~1v3~1inpi~1unites_legales~1{siren}~1brevets/get') %>){:target="_blank"} |
                  | Données des dessins & modèles | API **Modèles déposés** <br> `../inpi/unites_legales/{siren}/modeles`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'inpi/modeles') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Propriete-intellectuelle/paths/~1v3~1inpi~1unites_legales~1{siren}~1modeles/get') %>){:target="_blank"} |
                  | Données des marques | API **Marques déposées** <br> `../inpi/unites_legales/{siren}/marques`<br> [📖 Fiche métier](<%= endpoint_path(uid: 'inpi/marques') %>){:target="_blank"} <br> [📟 Swagger](<%= developers_openapi_path(anchor: 'tag/Propriete-intellectuelle/paths/~1v3~1inpi~1unites_legales~1{siren}~1marques/get') %>){:target="_blank"} |

      developers:
        title: Espace développeurs&nbsp;🛠
        sections:
          - anchor: 'prerequis-techniques'
            title: Prérequis techniques
            content: |+
              Voici la liste des **fondamentaux techniques à mettre en place pour le bon fonctionnement de l’API&nbsp;Entreprise**&nbsp;:

              - ☑️ Être en mesure de gérer le protocole HTTPS ;
              - ☑️ Avoir une version de langage récente. Si vous utilisez Java, une version >= 1.8 est nécessaire (pour la gestion des certificats de +1024 bit, du TLS 1.2 minimum et des suites cryptographiques - ciphers) ;
              - ☑️ S’assurer que nos Autorités de Certification (AC) pour les certificats SSL sont autorisées par vos systèmes ;
              - ☑️ L'API&nbsp;Entreprise est uniquement accessible par internet. Si vous avez un pare-feu, il faut donc prévoir de whitelister l'adresse IP du service API Entreprise ;
              - ☑️ Il est interdit d'interroger l'API&nbsp;Entreprise depuis un site web en front-end, car le jeton d'accès serait alors divulgué. Il vous faut donc interroger nos API depuis une application en back-end. Nous n'autoriserons pas le CORS (CORS - Cross Origin Ressource Sharing) ;
              - ☑️ Prévoir non seulement les coûts de développement mais également les coûts de maintenance ;
              - ☑️ Être en capacité de gérer les mises à jour de l'API&nbsp;Entreprise.

              <br>
              💡 Pour mieux comprendre l'API&nbsp;Entreprise avant de demander un accès, **vous pouvez utiliser [notre environnement de test](<%= developers_path(anchor: 'tester-api-preproduction') %>)**.

          - anchor: 'specifications-generales'
            title: Spécifications générales&nbsp;🎛
            subsections:
              - title: Respecter la volumétrie
                anchor: 'respecter-la-volumétrie'
                content: |+
                  #### Les plafonds

                  Les limites de volumétrie sur API&nbsp;Entreprise se décomposent en deux règles principales&nbsp;:&nbsp;

                  - **Un plafond général par IP de 1000 requêtes/minute**.

                  - **Une volumétrie par jeton par groupe d’endpoints&nbsp;:**
                        - **1er groupe**&nbsp;:&nbsp;Les endpoints renvoyant du JSON constituent un premier groupe. Vous pouvez effectuer jusqu’à 250 requêtes/min/jeton sur ce groupe.
                        - **2ème groupe**&nbsp;:&nbsp;Les endpoints transmettant des documents constituent un autre groupe. La volumétrie maximale d’appel concernant ce groupe est de 50 requêtes/min/jeton.
                        - **Exceptions**&nbsp;:&nbsp;Certains endpoints échappent à cette règle et présentent une volumétrie spécifique par endpoint&nbsp;:&nbsp;
                                - L’[attestation fiscale de la DGFIP](<%= developers_openapi_path(anchor: 'tag/Attestations-sociales-et-fiscales/paths/~1v3~1dgfip~1unites_legales~1{siren}~1attestation_fiscale/get') %>)&nbsp;:&nbsp;5 requêtes/min/jeton ;
                                - Les [actes de l’INPI](<%= developers_openapi_path(anchor: 'tag/Informations-generales/paths/~1v3~1inpi~1unites_legales~1{siren}~1actes/get') %>)&nbsp;:&nbsp;5 requêtes/min/jeton ;
                                - Les [comptes annuels du RNCS de l’INPI](<%= endpoint_path(uid: 'inpi/comptes_annuels_rncs') %>)&nbsp;:&nbsp;5 requêtes/min/jeton ;
                                - Les [effectifs de l’URSSAF](<%= endpoint_path(uid: 'urssaf/effectifs') %>)&nbsp;:&nbsp;250 requêtes/min/jeton ;

                  #### Informations volumétrie dans le header

                  ##### Pour toutes les réponses&nbsp;:

                  Dans toutes les réponses de nos API, le header vous transmet des informations sur la volumétrie&nbsp;:

                  {:.fr-table}
                  | Champs du header    |   Signification    |     Format           |
                  |:------------------------------|:------------------|:------------:|
                  | `RateLimit-Limit` |La **limite** concernant l'endpoint appelé, soit le nombre de requête/minute. | Nombre|
                  | `RateLimit-Remaining` |Le **nombre d'appels restants** durant la période courante d'une minute. | Nombre |
                  | `RateLimit-Reset` |La **fin de la période** courante. | Timestamp |

                  {:.fr-highlight.fr-highlight--example}
                  >**Exemple&nbsp;:**
                  >Considérons un endpoint ayant une limite de 50 appels /minute.
                  >Vous faîtes un premier appel à 10h00 pile, et effectuez un second appel 20 secondes plus tard, puis un troisième 10 secondes plus tard, vous aurez les valeurs suivantes :
                  > - `RateLimit-Limit` : 50 ;
                  > - `RateLimit-Remaining` : 47 (50 moins les 3 appels effectués) ;
                  > - `RateLimit-Reset` : [*Timestamp correspondant au jour présent à 10h01*]. Le premier appel initialise le compteur (à 10h00 pile), la période se termine 1min plus tard.
                  >
                  > Vous pouvez donc jusqu'à 10h01 pile effectuer 47 appels, le compteur sera réinitialisé à 50 à ce moment-là.

                  ##### En cas de dépassement :

                  Si vous dépassez le nombre d'appels autorisés (`RateLimit-Remaining = 0`), le serveur répondra avec le `status 429` sur tous les appels suivants dans la même période.

                  Le header associé à ce code erreur `429` sera accompagné&nbsp;:&nbsp;
                  - des trois champs précédents ;
                  - d'un champ supplémentaire indiquant le temps à attendre avant de pouvoir effectuer des nouveaux appels.

                  {:.fr-table}
                  | Champs du header    |   Signification    |     Format           |
                  |:------------------------------|:------------------|:------------:|
                  | `RateLimit-Limit` |La **limite** concernant l'endpoint appelé, soit le nombre de requête/minute. | Nombre|
                  | `RateLimit-Remaining` |Le **nombre d'appels restants** durant la période courante d'une minute. | Nombre |
                  | `RateLimit-Reset` |La **fin de la période** courante. | Timestamp |
                  | *Uniquement pour le header associé au code erreur 429* <br> `Retry-after`| **Décompte du nombre de secondes restantes** avant la prochaine période | Secondes |

                  Vous pouvez donc **utiliser les champs du header pour optimiser votre consommation de l'API&nbsp;Entreprise**.

                  #### Règles de bannissement en cas de surconsommation

                  En cas de non prise en compte des codes erreurs `429` ou en cas de dépassement de la limite de volumétrie globale, **votre IP sera temporairement bannie de nos serveurs pour une durée fixe et non révocable de 12h**. Si vous avez plusieurs jetons, tous seront donc bloqués pendant ce laps de temps.

                  Les appels depuis une IP bannie ne renvoient pas de codes HTTP, le serveur ne répond tout simplement pas.
                  Vous pouvez en revanche vérifier si vous avez dépassé ce seuil depuis votre [compte utilisateur](<%= user_tokens_path %>){:target="_blank"}.

                  {:.fr-highlight}
                  > ℹ️ Au bout de ces 12 heures, vos accès sont automatiquement rétablis ; **il est donc inutile d'écrire au support**.

                  Nous vous invitons à prendre les mesures nécessaires car le dépassement intervient généralement chez nos utilisateurs lorsque leur programme n'a pas été correctement configuré.

                  Pour les appels de traitement de masse, il est souhaitable que vous fassiez vos **batchs automatiques la nuit ou durant les heures creuses** afin de ne pas affecter la qualité du service pour le reste des usagers.

              - title: Configurer vos timeout
                anchor: 'configurer-vos-timeout'
                content: |+
                  Le timeout est le temps d'attente maximal de réponse à une requête. Il vous permet de ne pas immobiliser votre logiciel en le laissant bloqué sur un appel sans réponse.

                  De façon générale, nous vous recommandons un timeout&nbsp;:&nbsp;
                  - de **5 secondes** pour les appels de données structurées JSON ;
                  - de **12 secondes** pour les appels retournant un PDF ou un ZIP.

                  De même, pour ne pas immobiliser nos serveurs, nous attendons les réponses de nos fournisseurs un maximum de 10 secondes avant de vous les retransmettre. Si ce délai d’attente est dépassé un code erreur HTTP `504` vous sera renvoyé.

              - title: Autoriser nos Autorités de Certifications
                anchor: 'autoriser-nos-autorités-de-certifications'
                content: |+
                  API&nbsp;Entreprise utilise [DHIMYOTIS](https://www.dhimyotis.com/) comme organisme de délivrance de ses certificats SSL principaux ainsi que [Let's Encrypt](https://letsencrypt.org/) pour certains services secondaires.

                  Il est conseillé d'ajouter ces Autorités de Certifications (AC) à votre base de confiance si vous en avez une. Une solution idéale est d'utiliser un paquet d'autorités mises à jour automatiquement ([Mozilla par exemple](https://wiki.mozilla.org/CA/Included_Certificates))

                  API&nbsp;Entreprise utilise des certificats multi-domaines ; c'est-à-dire avec un "nom courant" (_common name - CN_) et plusieurs "noms alternatifs du sujet" (_subject alternatives names - SAN_), **soyez certains que vos outils fonctionnent correctement avec**.

              - title: Gérer les erreurs - codes HTTPS
                anchor: 'gérer-les-erreurs---codes-https'
                content: |+
                  #### Un code standard HTTPS pour catégoriser le statut de l'appel
                  Toutes les réponse de l’API&nbsp;Entreprise sont envoyées avec un code HTTPS. **Ces codes permettent de se renseigner sur le statut de l’appel**, et sont harmonisés pour l'ensemble des API quelque soir le fournisseur de données.
                  Pour en savoir plus sur les codes HTTPS, cet article de [Wikipedia](https://fr.wikipedia.org/wiki/Liste_des_codes_HTTP){:target="_blank"} constitue une bonne base explicative.

                  ##### En cas de succès, le code HTTP commence par 2 :

                  {:.fr-table}
                  | Code HTTPS                                       |      Signification                 |
                  |--------------------------------------------------|------------------------------------|
                  |`200` | **Tout va bien.**|

                  ##### En cas d’échec, si l’erreur vient de votre côté, le code HTTP commence par 4 :

                  {:.fr-table}
                  | Code HTTP                       |      Signification                     |
                  |---------------------------------|----------------------------------------|
                  |`400` | **Mauvaise requête** – La syntaxe de votre requête est erronée.|
                  |`401` | **Non autorisé** – Votre token est invalide ou manquant.|
                  |`403` | **Interdit** – Le serveur a compris votre requête mais refuse de l’exécuter car votre jeton ne vous donne pas accès à cette ressource.|
                  |`404` | **Non trouvé** – La ressource (l'entreprise, le certificat, …) demandée n'a pas été trouvée. Cette erreur intervient par exemple lors de l’entrée d’un numéro de SIREN qui n’existe pas, ou bien lorsque l’entreprise qu’il designe est en dehors du périmètre de l’endpoint.|
                  |`422` | **Entité non traitable** – Le format de la donnée passée en paramètre n'est pas accepté. Par exemple, si vous entrez 20 chiffres dans le paramètre SIREN, votre requête est automatiquement rejetée, car un SIREN fait obligatoirement 9 chiffres.|
                  |`451` | **Indisponible pour raisons légales** - ce code est spécifiquement renvoyé lorsque vous demandez les informations d’une entreprise ou d’un établissement non diffusible au travers des endpoints `entreprises` et `etablissements` de l’INSEE, sans avoir utilisé l’option d’appel spécifique. Pour en savoir plus, [consultez la documentation de cet endpoint dans le catalogue de données](../catalogue/).|


                  ###### En cas d’échec, si l’erreur provient d’API&nbsp;Entreprise ou bien des fournisseurs de données, le code HTTP commence par 5 :

                  {:.fr-table}
                  | Code HTTP                        |      Signification                     |
                  |----------------------------------|----------------------------------------|
                  |`500` | **Erreur interne à API&nbsp;Entreprise** – Une erreur interne du serveur d’API&nbsp;Entreprise est survenue. [Consultez votre compte utilisateur](<%= user_tokens_path %>){:target="_blank"}, l’historique de l’incident devrait y être affiché ; ainsi que les actions à venir.
                  |`502` | **Erreur interne fournisseur** – Une erreur interne du serveur du ou des fournisseurs est survenue. [Consultez votre compte utilisateur](<%= user_tokens_path %>){:target="_blank"}, l’historique de l’incident devrait y être affiché ; ainsi que les actions à venir.
                  |`503` | **Service non disponible** – Le service est temporairement indisponible ou en maintenance. Pour connaître l’historique de disponibilité et les incidents type de l’endpoint, vous pouvez [consulter le catalogue de données](../catalogue/).
                  |`504` | **Intermédiaire hors délai** – Le(s) producteur(s) de données ont mis trop de temps à répondre. Notre temps d’attente, nous permettant de ne pas immobiliser le serveur sur un appel sans réponse, est fixé à 10 secondes et a été dépassé.|


                  #### Un code supplémentaire pour préciser l'erreur et enclencher une action

                  Tous les codes erreur HTTPS sont accompagnés de **codes plus précis, spécifiques à chaque situation d’erreur**. Une explication en toutes lettres est également donnée dans la payload. Enfin, dans certains cas, une métadonnée actionnable est disponible.

                  Dans l’exemple ci-dessous, la clé `retry_in` permet justement de relancer un appel après le nombre de secondes indiquées.

                  >_Exemple de payload d'un code HTTPS 502 :_
                  >```
                  >{
                  >    "errors": [
                  >       {
                  >            "code": "04501",
                  >            "title": "Analyse de la situation du compte en cours",
                  >            "detail": "La situation de l'entreprise requiert une analyse manuelle d'un agent de l'URSSAF. Une >demande d'analyse vient d'être envoyée, cela prend au maximum 2 jours.",
                  >            "meta": {
                  >                "provider": "ACOSS",
                  >                "retry_in": 172800
                  >           }
                  >        }
                  >    ]
                  >}
                  >```


                  Retrouvez tous les codes erreurs pour chaque endpoint dans [notre swagger, partie "Response samples"](<%= developers_openapi_path %>){:target="_blank"}.
                  La liste des codes spécifiques à chaque endpoint y est disponible.


              - title: Renseigner les paramètres d'appel et de traçabilité
                anchor: 'renseigner-les-paramètres-dappel-et-de-traçabilité'
                content: |+
                  API&nbsp;Entreprise vous permet d’accéder à des données protégées. C’est pourquoi, dans un **objectif de traçabilité**, nous vous demandons de renseigner dans chacune de vos requêtes, non seulement un jeton d’accès, mais aussi **certaines informations qualifiant votre requête**.


                  {:.fr-highlight.fr-highlight--caution}
                  > ⚠️ **Ces paramètres sont obligatoires**. Les appels ne comportant pas ces paramètres sont rejetés, et un code erreur vous est renvoyé.


                  Pour chaque endpoint, nous précisons dans le [swagger, rubrique "Query parameters"](<%= developers_openapi_path %>){:target="_blank"} les paramètres obligatoires spécifiques, ci-dessous une explication détaillée des éléments à fournir pour chaque paramètre de traçabilité :

                  {:.fr-table}
                  | Paramètre                                                  |      Information à renseigner           |
                  |:----------------------------------------------------------:|-----------------------------------------|
                  |`&context=CadreDeLaRequête`|**Le cadre de la requête** <br><br>Par exemple : aides publiques, marchés publics ou gestion d'un référentiel tiers utilisé pour tel type d'application*.*
                  |`&recipient=BénéficaireDeL'Appel`|**Le bénéficiaire de l'appel** <br><br>Ce paramètre permet la traçabilité de l'appel et doit correspondre au _SIRET de l'organisation publique habilitée à utiliser la donnée_. <br><br>Si vous êtes une collectivité ou une administration, ce paramètre doit donc être votre numéro de SIRET. Si vous êtes un éditeur, il s'agit du SIRET de l'organisation publique cliente demandant la donnée.<br><br>Une vérification est effectuée par API Entreprise pour refuser tout format qui ne serait pas un numéro de SIRET et pour refuser un SIRET qui serait identique à l'entité appelée.
                  |`&object= RaisonDeL'AppelOuIdentifiant`|**La raison de l'appel** <br> ou l'identifiant de la procédure. <br><br> L'identifiant peut être interne à votre organisation ou bien un numéro de marché publique, un nom de procédure ; l'essentiel est que celui-ci vous permette de tracer et de retrouver les informations relatives à l'appel. En effet, vous devez pouvoir justifier de la raison d'un appel auprès du fournisseur de données. <br> Description courte (< 50 caractères).

              - title: Gérer les évolutions de version
                anchor: 'gerer-les-evolutions-de-version'
                content: |+
                  Il est fréquent que les API évoluent et que, par conséquent, de nouvelles versions soient publiées.
                  La version majeure V.3 de l'API&nbsp;Entreprise permet de créer facilement de nouvelles versions, tout en gardant les précédentes, rendant ainsi accessibles rapidement les évolutions qu'API Entreprise obtient de ses fournisseurs.

                  {:.fr-h5}
                  #### Toute évolution implique une montée de version

                  Les montés de version d'une API interviennent pour toute évolution, c'est-à-dire :
                  - l'ajout d'un nouveau champ par le fournisseur de la donnée ;

                    {:.fr-highlight.fr-highlight--example}
                    > Par exemple : Ajout du champ "économie sociale et solidaire" lors d'une évolution mineure par l'Insee.

                  - la transformation de la structure de l'API par le fournisseur de la donnée ;

                    {:.fr-highlight.fr-highlight--example}
                    > Par exemple : Sortie d'une évolution majeure chez le fournisseur donnée.

                  - l'ajout d'une fonctionnalité par API&nbsp;Entreprise

                    {:.fr-highlight.fr-highlight--example}
                    > Par exemple : Délivrance d'un nouveau champ "Certification valide" pour une API qui ne renvoyait avant que l'URL de téléchargement de l'attestation.

                  Pour comprendre comment monter en version, [consultez la rubrique suivante](#changer-de-version).

                  {:.fr-h5}
                  #### Les anciennes versions maintenues tant que le fournisseur de la donnée le permet

                  Depuis la V.3 de l'API&nbsp;Entreprise, les anciennes versions sont maintenues par le service API Entreprise tant que cela est possible.
                  En pratique, cela signifie que :
                  - tant que le fournisseur continue d'envoyer la strcuture de données de l'ancienne version, cette ancienne version est maintenue par l'API&nbsp;Entreprise ;
                  - si le fournisseur ne renvoie plus la même structure de donnée, API&nbsp;Entreprise supprimera l'ancienne version car la maintenir reviendrait à renvoyer des champs vides.

              - title: Changer de version
                anchor: 'changer-de-version'
                content: |+
                  Depuis la version 3 de l'API&nbsp;Entreprise, toutes les API peuvent évoluer indépendamment les unes des autres. Les anciennes versions (à partir de la V.3) restent donc toujours disponibles si le fournisseur de la donnée continue de transmettre les informations.
                  Depuis la version 3, le numéro de version est un paramètre de l’appel et non plus une valeur fixe pour toutes les API comme en version 1 et 2 (Les versions 1 et 2 sont définitivement dépréciées, la version 1 étant déjà fermée et **la version 2 fermant le 30 juin 2023**).

                  >_Exemple d'utilisation du paramètre d'appel de version :_
                  > Imaginons un exemple fictif : l'API documents, cette API est disponible en v.3 et une nouvelle version est sortie, la V.4.
                  > Pour appeler la version souhaitée, il vous faudra directement inscrire le numéro de la version dans l'URL : `https://entreprise.api.gouv.fr/v3/...` pour la V.3 ou `https://entreprise.api.gouv.fr/v4/...` pour la V.4.

                  {:.fr-highlight}
                  📩 Une lettre d'information annonce systématiquement les nouvelles évolutions. Vous pouvez vous abonner [ici](<%= newsletter_path %>).

              - title: Monitorer la disponibilité des API
                anchor: 'monitorer-la-disponibilité-des-api'
                content: |+
                  Pour vous informer de la disponibilité de nos API&nbsp;:
                  - vous pouvez retrouver tous les incidents et opérations de maintenance directement depuis notre [page de statut](https://status.entreprise.api.gouv.fr/){:target="_blank"}, cette page est complétée manuellement par nos services ;
                  - vous pourrez bientôt utiliser nos API de monitoring (⚙️ développements en cours).


              - title: Retrouver les droits d'un jeton JWT
                anchor: 'retrouver-les-droits-dun-jeton-jwt'
                content: |+
                  Pour connaître **la liste des APIs auxquelles vous avez le droit** avec votre jeton d'accès, vous pouvez le vérifier avec l'API `/privileges`.

                  Si vous gérez les tokens pour vos utilisateurs, vous pouvez aussi utiliser cette API pour vérifier les droits associés à leurs tokens.

                  {:.fr-h5}
                  #### La requête HTTP :

                  ```
                  https://entreprise.api.gouv.fr/v2/privileges?token=LeTokenATester
                  ```

                  Le paramètre d'appel à renseigner est le token dont vous souhaitez connaître les droits.

                  > **Exemple de réponse JSON :**
                  >```
                  >{
                  >  "privileges": [
                  >    "attestations_agefiph",
                  >    [...]
                  >    "actes_bilans_inpi"
                  >  ]
                  >}
                  > ```

                  La réponse JSON renvoie la liste des API autorisées. Retrouvez-leurs spécifications techniques dans le [Swagger](<%= developers_openapi_path %>){:target="_blank_"}.

          - anchor: 'kit-de-mise-en-production'
            title: Kit de mise en production&nbsp;🚀
            subsections:
              - title: Tester l'API en préproduction
                anchor: 'tester-api-preproduction'
                content: |+
                  L'API&nbsp;Entreprise est **testable avec un jeton accessible à tous depuis notre environnement de staging**. Ce bac à sable retourne des données fictives.

                  Pour utiliser l'environnement de test, plusieurs moyens sont possibles :
                  * **Utilisez l'interface disponible depuis [API.gouv](https://api.gouv.fr/documentation/api-entreprise){:target="_blank"}** :
                      1. Copiez le jeton de test disponible dans les premiers paragraphes de la page.
                      2. Sélectionnez _"https://staging.entreprise.api.gouv.fr - Environnement de staging"_ dans le menu déroulant situé un peu plus bas du jeton de test, à gauche.
                      3. Cliquez sur le bouton à droite _"Authorize"_, et entrez le jeton de test dans le champ _"Value"_ de la modale qui s'est ouverte ; validez en cliquant sur _"Authorize"_. L'environnement de test est configuré, fermez la modale.
                      4. Pour terminer, pour chacune des API, un bouton _"Try it out"_ vous permet de préremplir les paramètres d'appel avec différents exemples. Appuyez sur _"Execute"_ pour obtenir les différentes réponses possibles.

                  * **Utilisez un logiciel de type _Postman_ à partir du fichier OpenAPI :**
                      1. Téléchargez le fichier OpenAPI de l'API&nbsp;Entreprise depuis la [page de swagger](<%= developers_openapi_path %>), avec le bouton "Download" situé en début de page.
                      2. Importer ce fichier dans un logiciel de test de type _Postman_.
                      3. Configurez votre environnement avec l'url de l'environnement de staging `https://staging.entreprise.api.gouv.fr` (cette URL est partielle et doit être complétée par le nom de l'API désirée dans le bouquet).
                      API&nbsp;Entreprise ne recommande pas un logiciel plus qu'un autre, de nombreux tutoriels sont disponibles sur internet.

                  * **Interrogez le staging depuis votre terminal avec une ligne de commande :**
                      1. Rendez-vous sur la [documentation swagger du site API&nbsp;Entreprise](<%= developers_openapi_path %>), copiez le jeton de staging disponible en début de page.
                      2. Dans la partie _"Request samples"_ disponible pour chaque API dans le swagger, recopiez les lignes de commandes proposées débutant par `curl -X GET` en remplaçant `$token` par le jeton de test et en veillant à ajouter `staging` au début de l'URL : `https://staging.entreprise.api.gouv.fr/v3/...`
                      3. Lancez cette ligne de commande dans votre terminal.

              - title: Récupérer le jeton JWT&nbsp;🔑
                anchor: 'récupérer-le-jeton-jwt'
                content: |+
                  Seule la personne ayant fait la demande d'habilitation a accès au token, au travers du [compte utilisateur API&nbsp;Entreprise](<%= user_tokens_path %>){:target="_blank"}.

                  - _Si vous avez réalisé la demande d'habilitation_, vous pouvez **récupérer vos tokens ou jetons d'accès directement depuis votre [compte](<%= user_tokens_path %>){:target="_blank"}**.

                  - _Si vous n'avez pas réalisé la demande d'habilitation mais que vous êtes la personne en charge d'intégrer l'API&nbsp;Entreprise_, **la personne ayant effectué la demande d'habilitation peut vous transmettre le token de façon sécurisée depuis son [compte](<%= user_tokens_path %>){:target="_blank"}**, en cliquant sur le bouton _"Transmettre le jeton à mon équipe technique"_. Vous recevrez alors, **par e-mail, un lien d'une durée de 4 heures** vous donnant accès au jeton.

                  {:.fr-highlight.fr-highlight--caution}
                  > ⚠️ L'utilisation de cette fonctionnalité du compte utilisateur doit avoir pour unique objectif la transmission sécurisée de la clé aux services techniques qui intégreront l'API&nbsp;Entreprise. **Le jeton JWT ne doit jamais être transmis par e-mail.**

              - title: Faire sa première requête
                anchor: 'faire-sa-première-requête'
                content: |+
                  #### Utiliser l'environnement de production - _Swagger_

                  Après avoir récupéré votre jeton, vous pouvez faire un premier appel de test.

                  Utilisez l'[environnement de production documenté (_Swagger_)](https://api.gouv.fr/documentation/api-entreprise}{:target="_blank"}), disponible sur api.gouv.fr.
                  Il permet, à l'aide d'un token d'authentification valide 🔑, d'effectuer directement depuis le navigateur des tests de l'API. Les données confidentielles restent bien protégées. Vous y trouverez aussi la spécification technique téléchargeable sous format YAML afin de pouvoir accélérer le développement de vos outils d'interfaçage avec API&nbsp;Entreprise.

                  {:.fr-highlight.fr-highlight--caution}
                  > ⚠️ Attention, pour rappel, vous ne devez jamais copier-coller un token dans la barre de recherche classique d'un moteur de recherche ou dans un e-mail. Pour récupérer votre jeton de façon sécurisée, consultez cette [rubrique](<%= faq_index_path(anchor: 'comment-transmettre-le-jeton-d-acces-en-tout-securite') %>){:target="_blank"}.


                  #### Éléments constitutifs de la requête HTTP d'API&nbsp;Entreprise

                  Chaque URL de requête est spécifiée dans le [Swagger](<%= developers_openapi_path %>){:target="_blank_"},

                  {:.fr-h6}
                  ##### Exemple de requête :

                  ```
                  https://entreprise.api.gouv.fr/v3/attestation_fiscales_dgfip/SirenDeL’Entreprise?token=📝&user_id=📝&context=📝&recipient=📝&object=📝
                  ```

                  {:.fr-table}
                  | Éléments composant la requête              |   État    | Exemples      |
                  |--------------------------------------------|-----------|---------------|
                  |**Domaine** <br>(ou préfixe) <br>qui conduit à l'API de façon sécurisée| prédéfini par endpoint|`https://entreprise.api.gouv.fr`|
                  |**Numéro de la version** <br>(par défaut désormais en V3)| prédéfini par endpoint| `/v3`|
                  |**Nom de la donnée recherchée** <br>(ou *endpoint*)| prédéfini par endpoint| `/attestation_fiscale_dgfip`|
                  |**Identité de l'établissement concerné** <br>(souvent SIREN ou SIRET)| à choisir 📝|`/SIRENouSIRETdeL'Etablissement`|
                  |**Votre jeton d'accès**| à renseigner 📝|`?token=JetonD'Habilitation`|
                  |**Des paramètres de traçabilité**| à renseigner 📝| `&context=CadreDeLaRequête`<br> ℹ️ Plus d'informations disponibles dans la partie [Instruire les paramètres de traçabilité](<%= developers_path(anchor: 'renseigner-les-paramètres-dappel-et-de-traçabilité') %>){:target="_blank"}|

                  #### Constatez votre première trace d’appel depuis le compte utilisateur

                  Une fois que vous avez fait un premier appel, celui-ci est **répertorié** dans votre compte utilisateur, en passant par [la liste de tous vos tokens](https://dashboard.entreprise.api.gouv.fr/me/tokens), et en cliquant sur "Voir les statistiques".

              - title: Configurer le logiciel métier
                anchor: 'configurer-le-logiciel-métier'
                content: |+
                  Documentation en construction&nbsp;🚧

          - anchor: 'incidents-et-maintenances'
            title: Incidents et maintenances&nbsp;🚧
            subsections:
              - title: Que faire en cas de rupture de service ?
                anchor: 'que-faire-en-cas-de-rupture-de-service-'
                content: |+
                  Le service ne répond plus ? consultez [cette rubrique de notre FAQ](<%= faq_index_path(anchor: 'rupture-de-service') %>){:target="_blank"}.

              - title: Être informé des ruptures de service
                anchor: 'être-informé-des-ruptures-de-service'
                content: |+
                  Pour être informé des différentes indisponibilités, [abonnez-vous aux notifications par e-mail depuis notre page de statut](https://status.entreprise.api.gouv.fr/subscribe/email){:target="_blank"}.

          - anchor: 'renouvellement-du-jwt'
            title: Renouvellement du JWT&nbsp;🔑
            content: >-
              Pour comprendre comment renouveler votre jeton, consultez [cette rubrique de notre FAQ](<%= faq_index_path(anchor: 'jetons-d-acces') %>){:target="_blank"}.

