<div id="cas-usage" class="fr-container--fluid">
  <div class="banner"></div>

  <div class="fr-container doc_markdown_to_html" data-controller="anchor-buttons" data-anchor-buttons-tags-value='["h2", "h3", "h4", "section"]'>
    <section class="introduction fr-grid-row fr-background-default-white">
      <div class="introduction_image fr-col-xs-12 fr-col-sm-12 fr-col-md-12 fr-col-lg-2 fr-col-xl-2">
        <%= image_tag("#{api}/cas_usages/pictos/#{params[:uid]}.svg", alt: params[:uid]) %>
      </div>
      <div class="introduction_text fr-col-xs-12 fr-col-sm-12 fr-col-md-12 fr-col-lg-10 fr-col-xl-10">
        <label class="introduction_text--label"><%= t('.label') %></label>
        <h1 class="fr-h2 introduction_text--title fr-mt-1v"><%= @cas_usage.introduction[:title] %></h1>
        <div class="introduction_text--content"><%= markdown_to_html(@cas_usage.introduction[:content]) %></div>
        <div class="introduction_text--links">
          <%= link_to t('.link_access'), anchor: 'request-access' %><span class="icon fr-icon-arrow-down-line fr-mr-3w" aria-hidden="true"></span>
          <%= link_to t('.link_list_api'), anchor: 'list-api' %><span class="icon fr-icon-arrow-down-line" aria-hidden="true"></span>
        </div>
      </div>
    </section>


      <section class="role fr-background-grey">
        <h2 class="role--title" id="<%= @cas_usage.role[:anchor] %>"><%= @cas_usage.role[:title] %></h2>
        <div class="role--content"><%= markdown_to_html(@cas_usage.role[:content]) %></div>
        <% if @cas_usage.use_case_examples.present? %>
          <h2 class="use_case_examples--title" id="<%= @cas_usage.use_case_examples[:anchor] %>"><%= @cas_usage.use_case_examples[:title] %></h2>
          <div class="use_case_examples--content"><%= markdown_to_html(@cas_usage.use_case_examples[:content]) %></div>
        <% end %>
      </section>


    <% if @cas_usage.list_api.present? %>
      <section class="list_api fr-background-default-white">
        <h2 id="list-api"><%= t('.link_list_api') %><span class="fr-ml-2v fr-text--light">"<%= @cas_usage.name %>"</span></h2>
        <div class="list_api--content"><%= markdown_to_html(@cas_usage.list_api[:content]) %></div>
        <%= render partial: 'shared/cas_usages/list-api', locals: { api: }%>
      </section>
    <% end %>

    <% if @cas_usage.users.present? %>
      <section class="users fr-background-grey">
        <h2 class="users--title" id="<%= @cas_usage.users[:anchor] %>"><%= @cas_usage.users[:title] %></h2>
        <div class="users--content"><%= markdown_to_html(@cas_usage.users[:content]) %></div>
      </section>
    <% end %>
    
    <% if @cas_usage.request_access.present? %>
      <section class="request_access fr-background-default-white">
        <h2 id="request-access" class="request_access--title"><%= t('.request_access.title') %></h2>
        <div class="request_access--content"><p class="fr-text--lg fr-mb-0-5v"><%= t('.request_access.description') %></p></div>
        <a href="<%= @cas_usage.datapass_url %>" class="fr-btn fr-mt-10v fr-mb-4w" target='_blank'><%= t('.request_access.link')%><span class="fr-text--bold fr-ml-1v"><%= @cas_usage.name %></span></a>
        <div class="request_access--content"><%= markdown_to_html(@cas_usage.request_access[:content]) %></div>
      </section>
    <% end %>

    <section class="other-use-cases fr-background-grey">
      <%= render partial: 'shared/cas_usages/others', locals: { api: } %>
    </section>
  </div>
</div>
