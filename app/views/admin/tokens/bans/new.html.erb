<turbo-frame id="main-modal-content">
  <div class="fr-modal__content">
    <h1 id="<%= dom_id(@token, :ban_modal_title) %>" class="fr-modal__title">
      <span class="fr-icon-close-circle-line fr-icon--lg" aria-hidden="true"></span>
      Bannir le token
    </h1>
    <p>
      Cette action ne peut pas être annulée. Un nouveau token sera généré pour l'utilisateur,
      le demandeur et le responsable technique seront notifiés par email.
    </p>

    <%= form_with url: admin_user_token_ban_path(@user, @token), method: :post, id: dom_id(@token, :ban_form), data: { controller: 'datetime-now' } do |form| %>
      <div class="fr-input-group">
        <%= form.label :blacklisted_at, class: 'fr-label' do %>
          Date de bannissement
          <span class="fr-hint-text">Par défaut dans 30 jours</span>
        <% end %>
        <div class="fr-grid-row fr-grid-row--gutters fr-grid-row--bottom">
          <div class="fr-col">
            <%= form.datetime_local_field :blacklisted_at,
                value: 30.days.from_now.strftime('%Y-%m-%dT%H:%M'),
                class: 'fr-input',
                data: { datetime_now_target: 'input' } %>
          </div>
          <div class="fr-col-auto">
            <button type="button" class="fr-btn fr-btn--secondary" data-action="datetime-now#setNow">
              Maintenant
            </button>
          </div>
        </div>
      </div>

      <div class="fr-input-group">
        <%= form.label :comment, class: 'fr-label' do %>
          Commentaire (optionnel)
          <span class="fr-hint-text">Ce commentaire sera inclus dans l'email envoyé à l'utilisateur</span>
        <% end %>
        <%= form.text_area :comment, class: 'fr-input', rows: 3 %>
      </div>

      <div class="fr-checkbox-group fr-mb-4w">
        <input type="hidden" name="generate_new_token" value="0" autocomplete="off">
        <input type="checkbox" id="generate_new_token" name="generate_new_token" value="1" checked>
        <label class="fr-label" for="generate_new_token">Générer un nouveau token</label>
      </div>
    <% end %>
  </div>

  <div class="fr-modal__footer">
    <ul class="fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-lg fr-btns-group--icon-left">
      <li>
        <button type="submit" form="<%= dom_id(@token, :ban_form) %>" class="fr-btn" data-turbo="false" aria-controls="main-modal">
          Bannir le token
        </button>
      </li>
    </ul>
  </div>
</turbo-frame>
